var animationState = (function() {
    var value = true;
    return {
        change: function() {
            value = !value;
        },
        value: function() {
            return value;
        }
    };
})();

(function() {
    'strict use';
    var ajax_url1 = jQuery('.global').attr('data-ajax-url');
    var membercard;

    $('.link--name').on('click', changePage);
    $('.membercard__close').on('click', changePage);

    $(window).on('popstate', changePage);


    function changePage(event) {
        var prevUrl = window.location.href;

        // Dodaje dane w odpowiednie miejsce
        var addData = function(data) {
            membercard.find('.membercard__socialLinks').append(data);
        };

        if (event.type === 'click') {
            event.preventDefault();
            console.log(event.type);

            membercard = $(this).parents('.membercard');
            var id = membercard.attr('data-id');
            var url = membercard.find('.link--name').attr('href');

            changeUrl(url);
            request({
                action: 'social_links',
                id: id
            }, addData);
            animateMembercard(membercard);

        } else if (event.type === 'popstate') {
            console.log(event.type);

            animateMembercard(membercard);
            changeUrl(prevUrl);

        }
    }

    function animateMembercard(membercard) {
        if (animationState.value()) {
            $('.membercard').not(membercard).addClass('hidden');
            $('.global').addClass('global--full');

            membercard.addClass('membercard--full');
            membercard.children('.membercard__close').addClass('membercard__close--visible');
            membercard.children('.membercard__info').addClass('membercard__info--full');
            membercard.find('.membercard__name').addClass('membercard__name--full');
            console.log("Changing state:", animationState.value());
        } else {
            $('.membercard').not(membercard).removeClass('hidden');
            $('.global').removeClass('global--full');

            membercard.removeClass('membercard--full');
            membercard.children('.membercard__close').removeClass('membercard__close--visible');
            membercard.children('.membercard__info').removeClass('membercard__info--full');
            membercard.find('.membercard__name').removeClass('membercard__name--full');
            console.log("Changing state:", animationState.value());
        }

        animationState.change();
        console.log("State changed to:", animationState.value());

    }

    function changeUrl(url) {
        if (url != window.location) {
            //add the new page to the window.history
            window.history.pushState({
                path: url
            }, '', url);
        }
    }

    function request(requestingData, addData) {
        $.ajax({
            url: ajax_url1,
            type: 'POST',
            data: requestingData,
            success: function(data) {
                addData(data);
                console.log('Data loaded');
                bLazy.revalidate();
            },
            error: function(errorThrown) {
                console.log(errorThrown);
            }
        });
    }
})();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJtZW1iZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIGFuaW1hdGlvblN0YXRlID0gKGZ1bmN0aW9uKCkge1xuICAgIHZhciB2YWx1ZSA9IHRydWU7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgY2hhbmdlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhbHVlID0gIXZhbHVlO1xuICAgICAgICB9LFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH1cbiAgICB9O1xufSkoKTtcblxuKGZ1bmN0aW9uKCkge1xuICAgICdzdHJpY3QgdXNlJztcbiAgICB2YXIgYWpheF91cmwxID0galF1ZXJ5KCcuZ2xvYmFsJykuYXR0cignZGF0YS1hamF4LXVybCcpO1xuICAgIHZhciBtZW1iZXJjYXJkO1xuXG4gICAgJCgnLmxpbmstLW5hbWUnKS5vbignY2xpY2snLCBjaGFuZ2VQYWdlKTtcbiAgICAkKCcubWVtYmVyY2FyZF9fY2xvc2UnKS5vbignY2xpY2snLCBjaGFuZ2VQYWdlKTtcblxuICAgICQod2luZG93KS5vbigncG9wc3RhdGUnLCBjaGFuZ2VQYWdlKTtcblxuXG4gICAgZnVuY3Rpb24gY2hhbmdlUGFnZShldmVudCkge1xuICAgICAgICB2YXIgcHJldlVybCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xuXG4gICAgICAgIC8vIERvZGFqZSBkYW5lIHcgb2Rwb3dpZWRuaWUgbWllanNjZVxuICAgICAgICB2YXIgYWRkRGF0YSA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgIG1lbWJlcmNhcmQuZmluZCgnLm1lbWJlcmNhcmRfX3NvY2lhbExpbmtzJykuYXBwZW5kKGRhdGEpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChldmVudC50eXBlID09PSAnY2xpY2snKSB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coZXZlbnQudHlwZSk7XG5cbiAgICAgICAgICAgIG1lbWJlcmNhcmQgPSAkKHRoaXMpLnBhcmVudHMoJy5tZW1iZXJjYXJkJyk7XG4gICAgICAgICAgICB2YXIgaWQgPSBtZW1iZXJjYXJkLmF0dHIoJ2RhdGEtaWQnKTtcbiAgICAgICAgICAgIHZhciB1cmwgPSBtZW1iZXJjYXJkLmZpbmQoJy5saW5rLS1uYW1lJykuYXR0cignaHJlZicpO1xuXG4gICAgICAgICAgICBjaGFuZ2VVcmwodXJsKTtcbiAgICAgICAgICAgIHJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgIGFjdGlvbjogJ3NvY2lhbF9saW5rcycsXG4gICAgICAgICAgICAgICAgaWQ6IGlkXG4gICAgICAgICAgICB9LCBhZGREYXRhKTtcbiAgICAgICAgICAgIGFuaW1hdGVNZW1iZXJjYXJkKG1lbWJlcmNhcmQpO1xuXG4gICAgICAgIH0gZWxzZSBpZiAoZXZlbnQudHlwZSA9PT0gJ3BvcHN0YXRlJykge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZXZlbnQudHlwZSk7XG5cbiAgICAgICAgICAgIGFuaW1hdGVNZW1iZXJjYXJkKG1lbWJlcmNhcmQpO1xuICAgICAgICAgICAgY2hhbmdlVXJsKHByZXZVcmwpO1xuXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhbmltYXRlTWVtYmVyY2FyZChtZW1iZXJjYXJkKSB7XG4gICAgICAgIGlmIChhbmltYXRpb25TdGF0ZS52YWx1ZSgpKSB7XG4gICAgICAgICAgICAkKCcubWVtYmVyY2FyZCcpLm5vdChtZW1iZXJjYXJkKS5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgICAgICAgICAkKCcuZ2xvYmFsJykuYWRkQ2xhc3MoJ2dsb2JhbC0tZnVsbCcpO1xuXG4gICAgICAgICAgICBtZW1iZXJjYXJkLmFkZENsYXNzKCdtZW1iZXJjYXJkLS1mdWxsJyk7XG4gICAgICAgICAgICBtZW1iZXJjYXJkLmNoaWxkcmVuKCcubWVtYmVyY2FyZF9fY2xvc2UnKS5hZGRDbGFzcygnbWVtYmVyY2FyZF9fY2xvc2UtLXZpc2libGUnKTtcbiAgICAgICAgICAgIG1lbWJlcmNhcmQuY2hpbGRyZW4oJy5tZW1iZXJjYXJkX19pbmZvJykuYWRkQ2xhc3MoJ21lbWJlcmNhcmRfX2luZm8tLWZ1bGwnKTtcbiAgICAgICAgICAgIG1lbWJlcmNhcmQuZmluZCgnLm1lbWJlcmNhcmRfX25hbWUnKS5hZGRDbGFzcygnbWVtYmVyY2FyZF9fbmFtZS0tZnVsbCcpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJDaGFuZ2luZyBzdGF0ZTpcIiwgYW5pbWF0aW9uU3RhdGUudmFsdWUoKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkKCcubWVtYmVyY2FyZCcpLm5vdChtZW1iZXJjYXJkKS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgICAgICAgICAkKCcuZ2xvYmFsJykucmVtb3ZlQ2xhc3MoJ2dsb2JhbC0tZnVsbCcpO1xuXG4gICAgICAgICAgICBtZW1iZXJjYXJkLnJlbW92ZUNsYXNzKCdtZW1iZXJjYXJkLS1mdWxsJyk7XG4gICAgICAgICAgICBtZW1iZXJjYXJkLmNoaWxkcmVuKCcubWVtYmVyY2FyZF9fY2xvc2UnKS5yZW1vdmVDbGFzcygnbWVtYmVyY2FyZF9fY2xvc2UtLXZpc2libGUnKTtcbiAgICAgICAgICAgIG1lbWJlcmNhcmQuY2hpbGRyZW4oJy5tZW1iZXJjYXJkX19pbmZvJykucmVtb3ZlQ2xhc3MoJ21lbWJlcmNhcmRfX2luZm8tLWZ1bGwnKTtcbiAgICAgICAgICAgIG1lbWJlcmNhcmQuZmluZCgnLm1lbWJlcmNhcmRfX25hbWUnKS5yZW1vdmVDbGFzcygnbWVtYmVyY2FyZF9fbmFtZS0tZnVsbCcpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJDaGFuZ2luZyBzdGF0ZTpcIiwgYW5pbWF0aW9uU3RhdGUudmFsdWUoKSk7XG4gICAgICAgIH1cblxuICAgICAgICBhbmltYXRpb25TdGF0ZS5jaGFuZ2UoKTtcbiAgICAgICAgY29uc29sZS5sb2coXCJTdGF0ZSBjaGFuZ2VkIHRvOlwiLCBhbmltYXRpb25TdGF0ZS52YWx1ZSgpKTtcblxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNoYW5nZVVybCh1cmwpIHtcbiAgICAgICAgaWYgKHVybCAhPSB3aW5kb3cubG9jYXRpb24pIHtcbiAgICAgICAgICAgIC8vYWRkIHRoZSBuZXcgcGFnZSB0byB0aGUgd2luZG93Lmhpc3RvcnlcbiAgICAgICAgICAgIHdpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZSh7XG4gICAgICAgICAgICAgICAgcGF0aDogdXJsXG4gICAgICAgICAgICB9LCAnJywgdXJsKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlcXVlc3QocmVxdWVzdGluZ0RhdGEsIGFkZERhdGEpIHtcbiAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgIHVybDogYWpheF91cmwxLFxuICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxuICAgICAgICAgICAgZGF0YTogcmVxdWVzdGluZ0RhdGEsXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgYWRkRGF0YShkYXRhKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRGF0YSBsb2FkZWQnKTtcbiAgICAgICAgICAgICAgICBiTGF6eS5yZXZhbGlkYXRlKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycm9yVGhyb3duKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3JUaHJvd24pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59KSgpOyJdLCJmaWxlIjoibWVtYmVyLm1pbi5qcyIsInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
