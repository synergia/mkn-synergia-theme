// main.js //
// Wszystko wrzucamy tu

(function($) {
  'use strict';

  var _destroyFn;

  $.scrollupbar = function($bar, options) {
    // Default options
    options = $.extend({
      enterViewport: $.noop,
      fullyEnterViewport: $.noop,
      exitViewport: $.noop,
      partiallyExitViewport: $.noop
    }, options);

    function isFullyInViewport() {
      return $window.scrollTop() <= $bar.offset().top;
    }

    function isInViewport() {
      return $window.scrollTop() < $bar.offset().top + $bar.outerHeight();
    }

    var $window = $(window),
        $document = $(document),
        minY = $bar.css('position') == 'fixed' ? 0 : $bar.offset().top,
        lastY = $window.scrollTop(), // Use last Y to detect scroll direction.
        initialPosTop = $bar.position().top,
        iOS = /(iPad|iPhone|iPod)/g.test(navigator.userAgent),
        timeout;

    $.scrollupbar.isInViewport = isInViewport();
    $.scrollupbar.isFullyInViewport = isFullyInViewport();

    // iOS can't handle momentum scroll properly (See discussion on
    // http://stackoverflow.com/questions/2863547).
    if (!iOS) {
      $window.on('scroll.scrollupbar', function() {
        var y = $window.scrollTop(),
            barHeight = $bar.outerHeight();

        // Ignore elastic scrolling.
        if (y < 0 || y > ($document.height() - $window.height())) {
          return;
        }

        // Cancel the event fired by the previous scroll.
        if (timeout) {
          clearTimeout(timeout);
        }

        if (y < lastY) { // Scrolling up
          // If the bar is hidden, place it right above the top frame.
          if (!$.scrollupbar.isInViewport && lastY - barHeight >= minY) {
            $bar.css('top', lastY - barHeight);
            $.scrollupbar.isInViewport = true;
            options.enterViewport();
          }

          // Scrolls up bigger than the bar's height fixes the bar on top.
          if (isFullyInViewport()) {
            if (y >= minY) {
              $bar.css({
                'position': 'fixed',
                'top': 0
              });
            } else {
              $bar.css({
                'position': 'absolute',
                'top': initialPosTop
              });
            }

            if (!$.scrollupbar.isFullyInViewport) {
              $.scrollupbar.isFullyInViewport = true;
              options.fullyEnterViewport();
            }
          }

          // Fire an event to reveal the entire bar after 400ms if the scroll
          // wasn't big enough.
          timeout = setTimeout(function() {
            if (!isFullyInViewport()) {
              $bar.css({
                'position': 'fixed',
                'top': $bar.offset().top - y
              });

              $bar.animate({'top': 0}, 100, function() {
                $.scrollupbar.isFullyInViewport = true;
                options.fullyEnterViewport();
              });
            }
          }, 400);
        } else if (y > lastY) { // Scrolling down
          // Unfix the bar allowing it to scroll with the page.
          if ($.scrollupbar.isFullyInViewport) {
            $bar.css({
              'position': 'absolute',
              'top': lastY > minY ? lastY : initialPosTop
            });

            if (!isFullyInViewport()) {
              $.scrollupbar.isFullyInViewport = false;
              options.partiallyExitViewport();
            }
          }

          if ($.scrollupbar.isInViewport && !isInViewport()) {
            $.scrollupbar.isInViewport = false;
            options.exitViewport();
          }

          // Fire an event to hide the entire bar after 400ms if the scroll
          // wasn't big enough.
          timeout = setTimeout(function() {
            if (isInViewport() && y - barHeight >= minY) {
              $bar.animate({'top': y - barHeight}, 100, function() {
                $.scrollupbar.isInViewport = false;
                options.exitViewport();
              });
            }
          }, 400);
        }

        lastY = y;
      });
    } else { // Fallback simplified behaviour for iOS.
      $window.on('touchstart.scrollupbar', function () {
        lastY = $window.scrollTop();
      });

      $window.on('touchend.scrollupbar', function () {
        var y = $window.scrollTop();

        if (y < lastY || y - $bar.outerHeight() < minY) { // Scrolling up
          if (y <= minY) {
            // Restore original position.
            $bar.css({
              'position': 'absolute',
              'top': initialPosTop
            });

            $bar.show(function() {
              $.scrollupbar.isInViewport = true;
              $.scrollupbar.isFullyInViewport = true;
              options.enterViewport();
              options.fullyEnterViewport();
            });
          } else {
            $bar.css({
              'position': 'fixed',
              'top': 0
            });

            $.scrollupbar.isInViewport = true;
            options.enterViewport();

            $bar.slideDown(function() {
              $.scrollupbar.isFullyInViewport = true;
              options.fullyEnterViewport();
            });
          }
        } else if (y > lastY) { // Scrolling down
          $.scrollupbar.isFullyInViewport = false;
          options.partiallyExitViewport();

          $bar.slideUp(function() {
            $.scrollupbar.isInViewport = false;
            options.exitViewport();
          });
        }

        lastY = y;
      });
    }

    _destroyFn = function() {
      // Unbind all listeners added by scrollupbar plugin
      $window.off('.scrollupbar');

      // Restore original bar position.
      $bar.css({
        'position': 'absolute',
        'top': initialPosTop
      });
    };

    return $bar;
  };

  $.scrollupbar.destroy = function() {
    if (_destroyFn) {
      return _destroyFn();
    }
  };

  $.fn.scrollupbar = function(options) {
    return $.scrollupbar(this, options);
  };
})(jQuery);

////= ../../bower_components/df-visible/jquery.visible.js

jQuery(function($) {

    /**
     * Dropy
     * http://codepen.io/Tombek/pen/OPvpLe
     */
    var dropy = {
      $dropys: null,
      openClass: 'open',
      selectClass: 'selected',
      init: function(){
        var self = this;
    
        self.$dropys = $('.dropy');
        self.eventHandler();
      },
      eventHandler: function(){
        var self = this;
    
        // Opening a dropy
        self.$dropys.find('.dropy__title').click(function(){
          self.$dropys.removeClass(self.openClass);
          $(this).parents('.dropy').addClass(self.openClass);
        });
    
        // Click on a dropy list
        self.$dropys.find('.dropy__content ul li a').click(function(){
          var $that = $(this);
          var $dropy = $that.parents('.dropy');
          var $input = $dropy.find('input');
          var $title = $(this).parents('.dropy').find('.dropy__title span');
    
          // Remove selected class
          $dropy.find('.dropy__content a').each(function(){
            $(this).removeClass(self.selectClass);
          });
    
          // Update selected value
          $title.html($that.html());
          $input.val($that.attr('data-value')).trigger('change');
    
          // If back to default, remove selected class else addclass on right element
          if($that.hasClass('dropy__header')){
            $title.removeClass(self.selectClass);
            $title.html($title.attr('data-title'));
          }
          else{
            $title.addClass(self.selectClass);
            $that.addClass(self.selectClass);
          }
    
          // Close dropdown
          $dropy.removeClass(self.openClass);
        });
    
        // Close all dropdown onclick on another element
        $(document).bind('click', function(e){
            if (! $(e.target).parents().hasClass('dropy')){ self.$dropys.removeClass(self.openClass); }
        });
      }
    };
    
    $(function(){
      dropy.init();
    });

       function cardExcerpt() {
        $(".card__excerpt").text(function(index, currentText) {
          return currentText.substr(0, 125) + '\u2026';
        });
      }
      cardExcerpt();

    // Pakuje mniejsze obrazki bez podpisu w <figure> //
    // Jeśli obrazek ma tytuł, tym się zajmuje php funkcja w project-functions.php
    $('.project__content p').each(function(index) {
      var some_img = $(this).find('img');
      var width = some_img.width();
      if (width < 980) {
        some_img.wrap("<figure></figure>");
      }
    });

    // Notyfikacje, powiadomienia //
    $(".note-close").click(function() {
      $(this).parent()
        .animate({
          opacity: 0
        }, 250, function() {
          $(this)
            .animate({
              marginBottom: 0
            }, 250)
            .children()
            .animate({
              padding: 0
            }, 250)
            .wrapInner("<div />")
            .children()
            .slideUp(250, function() {
              $(this).closest(".note").remove();
            });
        });
    });

    // Animacje dla banera rekrutacji //
    $('label.button').on('click', function() {
      $('.fb').addClass('animated fadeInUp');
      $('.date .icon-container').addClass('animated slideInLeft');
      $('.date span').addClass('animated slideInLeft');
      $('.location .icon-container').addClass('animated slideInRight');
      $('.location span').addClass('animated slideInRight');
    
    });
    $('#close_banner').on('click', function() {
      $('.fb').removeClass('animated fadeInUp');
      $('.date .icon-container').removeClass('animated slideInLeft');
      $('.date span').removeClass('animated slideInLeft');
      $('.location .icon-container').removeClass('animated slideInRight');
      $('.location span').removeClass('animated slideInRight');
    });
    
    // http://stackoverflow.com/questions/24070627/create-dropdown-banner-when-user-first-visits-website
    // Pozwalają otwierać baner tylko przy pierwszej wizycie
    
    // cookie-js

    //// = partials/show-nicknames.js

    $(document).ready(function(){
        // $("#nav-mobile").html($("#nav-main").html());
        $("#nav-trigger .navicon-button").click(function(){
          console.info('Burger clicked');
            if ($("#nav ul").hasClass("nav__menu--expanded")) {
                $("#nav ul").removeClass("nav__menu--expanded").slideUp(250);
                $(this).removeClass("open");
            } else {
                $("#nav ul").addClass("nav__menu--expanded").slideDown(250);
                $(this).addClass("open");
            }
        });
    });

    (function() {
        // Żeby tooltip nie klikał
        $('.tooltip').on('click', function(e) {
            e.preventDefault();
        });
    
        $('[data-github]').hover(function(e) {
            loadGithub();
            $(this).children('.tooltip').addClass('tooltip--active');
        }, function(e) {
            $(this).children('.tooltip').removeClass('tooltip--active');
        });
    
        $('[data-lastfm]').hover(function(e) {
            loadLastfm();
            $(this).children('.tooltip').addClass('tooltip--active');
        }, function(e) {
            $(this).children('.tooltip').removeClass('tooltip--active');
        });
    })();

    function loadGithub() {
        // Pobiera url z hrefa
        var profileUrl = $('a[data-github]').attr('href');
        // Odpowiednio obcina go do username
        var username = profileUrl.substr(19);
        // Dodaje username do url zapytania
        var requri = 'https://api.github.com/users/' + username;
        // Sprawdza, czy tooltip pusty, by nie generować nowych zapytań
        // i nie dodawać po raz kolejny dane do tooltipa
        if ($('[data-github] .tooltip').is(':empty')) {
            requestJSON(requri, function(json) {
                if (json.message === "Nie znaleziono" || username === '') {
                    $('[data-github] .tooltip').html("<h2>Brak informacji</h2>");
                } else {
                    username = json.login;
                    var profileurl = json.html_url;
                    var reposnum = json.public_repos;
                    var aviurl = json.avatar_url;
    
    
                    var outhtml = '<div class="gh">' +
                        '<h4 class="gh__name"><a class="link" href="' + profileurl + '"><img class="gh__avatar" src="' + aviurl + '">@' + username + '</a></h4>';
                    outhtml = outhtml + '<span class="gh__repos">Repozytoriów: ' + reposnum + '</span><hr/></div>';
                    $('[data-github] .tooltip').append(outhtml);
    
                } // end else statement
            }); // end requestJSON Ajax call
        }
    
        function requestJSON(url, callback) {
            $.ajax({
                url: url,
                complete: function(xhr) {
                    callback.call(null, xhr.responseJSON);
                }
            });
        }
    }

    function loadLastfm() {
        // Pobiera url z hrefa
        var profileUrl = $('a[data-lastfm]').attr('href');
        // Odpowiednio obcina go do username
        var username = profileUrl.substr(27);
        var baseUrl = 'http://ws.audioscrobbler.com/2.0/?method=user.getrecenttracks';
        var api_key = '299020c062c481f083ecd0276c315e3a';
    
        var requestUrl = baseUrl + '&user=' + username + '&api_key=' + api_key + '&format=json';
        console.log(username);
        if ($('[data-lastfm] .tooltip').is(':empty')) {
            $.getJSON(requestUrl, function(data) {
                var artist = data.recenttracks.track[0].artist["#text"];
                var song = data.recenttracks.track[0]["name"];
                var cover = data.recenttracks.track[0].image[3]["#text"];
                if (cover === "") {
                    cover = "http://img2-ak.lst.fm/i/u/174s/4128a6eb29f94943c9d206c08e625904.png";
                }
                var outhtml = '<div class="lf"><img class="lf__cover" src="' + cover + '"/><div class="lf__trackInfo"><span class="lf__artist">' + artist + '</span><span class="lf__song">' + song + '</span></div></div>';
                $('[data-lastfm] .tooltip').append(outhtml);
            });
        }
    }

    $(function() {
        $('a[href*="#"]:not(.link--tab)').click(function() {
            if (location.pathname.replace(/^\//, '') == this.pathname.replace(/^\//, '') && location.hostname == this.hostname) {
                var target = $(this.hash);
                target = target.length ? target : $('[name=' + this.hash.slice(1) + ']');
                if (target.length) {
                    $('html, body').animate({
                        scrollTop: target.offset().top
                    }, 800);
                    return false;
                }
            }
        });
    });

    $(document).ready(function() {
          var bLazy = new Blazy({
            offset: 20,
            selector: '.blazy',
            loadInvisible: false,
            breakpoints: [{
              width: 360, // Max-width
              src: 'data-src-small'
            }],
            success: function(element) {
              $(element).parent().removeClass('loading', 500);
              updateCounter();
            },
            error: function(element, msg) {
              if (msg === 'missing') {
                $(element).parent().removeClass('loading', 500); // Data-src is missing
                console.error("bLazy: data-src is missing");
              } else if (msg === 'invalid') {
                $(element).parent().removeClass('loading', 500);
                // Data-src is invalid
                console.error("bLazy: data-src is invalid");
        
              }
            }
          });
          // not needed, only here to illustrate amount of loaded images
          var imageLoaded = 0;
        
          function updateCounter() {
            imageLoaded++;
            console.info("bLazy: Images loaded: %d", imageLoaded);
          }
        
          // tabs(bLazy);

        ////= member.js

        //Skraca imiona, by nie wychodziły za bloki
        $('.membercard__name a').each(function(index) {
            var a = $(this);
            if (a.html().length > 17) {
                var name = a.text();
                // console.log(name);
                var trimmed_name = name.charAt(0) + ". " + name.substr(name.indexOf(' ') + 1);
                // console.log(trimmed_name);
                a.text(trimmed_name);
                if (a.html().length > 17) {
                    a.parent().addClass('membercard__name--tooLong');
                }
            }
        });
        
        $('.membercardSmall__name a').each(function(index) {
            var length = $(this).html().length;
            if (length > 14) {
                var name = $(this).text();
                // console.log(name);
                var trimmed_name = name.charAt(0) + ". " + name.substr(name.indexOf(' ') + 1);
                // console.log(trimmed_name);
                $(this).text(trimmed_name);
            }
        });

        (function() {
            var ajax_url = $('.global').attr('data-ajax-url');
            var post_offset = 0;
            var incNumber = 6; // ilość postów do załadowania
        
            var projects = (function(setProjects) {
                var loaded;
                var total;
                return {
                    incLoaded: function() {
                        loaded = loaded + incNumber;
                    },
                    getLoaded: function() {
                        return loaded;
                    },
                    setLoaded: function(setProjects) {
                        loaded = setProjects;
                    },
                    setTotal: function(setProjects) {
                        total = setProjects;
                    },
                    getTotal: function() {
                        return total;
                    }
                };
            })();
            var loadingButton = (function(button){
                return {
                    showSpinner: function(button) {
                        button.html('<div class="spinner"></div>');
                    },
                    showCaption: function(button) {
                        button.html('Zobacz starsze');
                    },
                    hide: function(button) {
                        button.hide();
                    }
                };
            })();
        
            $('#load_more_posts').on('click', loadMore);
            $('#load_more').on('click', loadProjects);
        
            function loadMore() {
                console.log('Clicked load_more');
                $(this).html('<div class="spinner"></div>');
                post_offset = parseInt(post_offset) + 6;
                $.ajax({
                    url: ajax_url,
                    type: 'POST',
                    data: {
                        action: 'load_posts',
                        post_offset: post_offset,
                    },
                    success: function(data) {
                        $('#load_more_posts').html('Zobacz starsze');
                        $('#posts .cardsWrapper').append(data);
                        console.info('Ajax: OK');
                        bLazy.revalidate();
                        cardExcerpt();
                    }
                });
            }
        
            function loadProjects() {
                var thisParent = $(this).parent();
                // ustawia całkowitą liczbę danych projektów
                projects.setTotal(thisParent.attr('data-total'));
                // jeśli jeszcze nie pobierano ajaxem projektów, to ustawia wartość
                // równą już wyświetlonych
                if (!projects.getLoaded()) {
                    projects.setLoaded(thisParent.find('.card').length);
                    console.log('Already:', projects.getLoaded());
                }
                var projects_status = thisParent.attr('data-projects-status');
                post_offset = parseInt(post_offset) + incNumber;
        
                if (projects.getTotal() > projects.getLoaded()) {
                    loadingButton.showSpinner($('#load_more'));
                    $.ajax({
                        url: ajax_url,
                        type: 'POST',
                        data: {
                            action: 'load_projects',
                            post_offset: post_offset,
                            projects_status: projects_status,
                        },
                        success: function(data) {
                            thisParent.children('.cardsWrapper').append(data);
                            bLazy.revalidate();
                            cardExcerpt();
                            loadingButton.showCaption($('#load_more'));
                            projects.incLoaded();
                            console.info('Ajax: Loaded more %s projects: %d/%d', projects_status, projects.getLoaded(), projects.getTotal());
                            if (projects.getTotal() <= projects.getLoaded()) {
                                loadingButton.hide($('#load_more'));
                            }
                        }
                    });
                } else {
                    return false;
                }
            }
        })();

        function initTopbar() {
            $('.topbarWrapper').scrollupbar({
                enterViewport: function() {
                    $('.topbarWrapper').addClass('topbarWrapper--visible');
                },
                fullyEnterViewport: function() {
                    $('#last-event').text('fullyEnterViewport');
                },
                exitViewport: function() {
                    $('#last-event').text('exitViewport');
                },
                partiallyExitViewport: function() {
                    $('#last-event').text('partiallyExitViewport');
                }
            });
        }
        initTopbar();
        
        if ($(window).width() < 750) {
            $.scrollupbar.destroy('.topbarWrapper');
        }
        
        $(window).scroll(function(event) {
            // didScroll = true;
            var st = $(this).scrollTop();
            // Gdy jesteśmy na samej górze, to pokazyjemy całe logo
            if (st === 0) {
                $('.topbarWrapper').removeClass('topbarWrapper--visible');
            }
        });

        var tabs = (function() {
            var currentTab;
            return {
                init: function() {
                    // pobieramy href
                    currentTab = $('.tabsMenu__item--current .link--tab').attr('href');
                    // href jest jednocześnie id odpowiedniego tabu, który wyświetlamy
                    $(currentTab).addClass('tab__content--visible');
                    // ładujemy obrazki
                    bLazy.load($(".blazy", currentTab), true);
                    console.info('Tabs initiated:', currentTab);
                },
                reset: function() {
                    // Z tym #tabsReset, to taki hack. Wykorzystywany dlatego, że
                    // po kliknięciu chowają się wszystkie taby, oprócz tej z odpowiednim id
                    currentTab = $('#tabsReset .link--tab').attr('href');
                    $(currentTab).removeClass("tab__content--hidden").addClass("tab__content--visible");
                    console.info('Tabs initiated:', currentTab);
                }
            };
        })();
        tabs.init();
        
        $(".global").on('click', '.link--tab', function(event) {
            // wyłącza domyślne przejście na adres linku
            event.preventDefault();
            // dodaje klasę do <li>
            $(this).parent().addClass("tabsMenu__item--current");
            // usuwa klasę z <li>
            $(this).parent().siblings().removeClass("tabsMenu__item--current");
            // pobieramy id z hrefu
            var tab = $(this).attr("href");
            // jeśli blok nie ma takiego id, to chowamy go
            $(".tab__content").not(tab).addClass("tab__content--hidden").removeClass("tab__content--visible");
            // a jeśli ma, to pokazujemy
            $(tab).removeClass("tab__content--hidden").addClass("tab__content--visible");
            // ładujemy obrazki w bloku z odpowiednim id
            bLazy.load($(".blazy", tab), true);
        });

        // http://codepen.io/jakubtursky/pen/vEwZop
        	$.fn.jQuerySimpleCounter = function( options ) {
        	    var settings = $.extend({
        	        start:  0,
        	        end:    100,
        	        easing: 'swing',
        	        duration: 400,
        	        complete: ''
        	    }, options );
        
        	    var thisElement = $(this);
        
        	    $({count: settings.start}).animate({count: settings.end}, {
        			duration: settings.duration,
        			easing: settings.easing,
        			step: function() {
        				var mathCount = Math.ceil(this.count);
        				thisElement.children('.counters__count').text(mathCount);
        			},
        			complete: settings.complete
        		});
        	};
        
        // var finishedNumber = $('#finished').data('finished');
        // console.log(finishedNumber);
        // $('#finished').jQuerySimpleCounter({end: finishedNumber, duration: 3000});
        // $('#number2').jQuerySimpleCounter({end: 55,duration: 3000});
        // $('#number3').jQuerySimpleCounter({end: 359,duration: 2000});
        // $('#number4').jQuerySimpleCounter({end: 246,duration: 2500});

        (function() {
            // https://marcin.laber.pl/2014/09/odmiana-liczebnikow-w-javascript/
            var num = function(value, numerals, wovalue) {
                var t0 = value % 10,
                    t1 = value % 100,
                    vo = [];
                if (wovalue !== true)
                    vo.push(value);
                if (value === 1 && numerals[1])
                    vo.push(numerals[1]);
                else if ((value === 0 || (t0 >= 0 && t0 <= 1) || (t0 >= 5 && t0 <= 9) || (t1 > 10 && t1 < 20)) && numerals[0])
                    vo.push(numerals[0]);
                else if (((t1 < 10 || t1 > 20) && t0 >= 2 && t0 <= 4) && numerals[2])
                    vo.push(numerals[2]);
                return vo[1];
            };
        
            $('.counter').each(function(index) {
                var status = $(this).attr('id');
                var count = parseInt($(this).children('a').html());
                console.log(count, status);
                if (status === 'finished') {
                    $(this).find('.counter__label').html(num(count, ["Projektów ukończonych", "Projekt ukończony", "Projekty ukończone"]));
                } else {
                    $(this).find('.counter__label').html(num(count, ["Projektów realizowanych", "Projekt realizowany", "Projekty realizowane"]));
                }
            });
            $('.counters__counter').each(function(index) {
                var status = $(this).attr('id');
                var count = parseInt($(this).children('.counters__count').data(status));
                console.log(count, status);
                if (status === 'finished') {
                    $(this).find('.counters__label').html(num(count, ["Projektów ukończonych", "Projekt ukończony", "Projekty ukończone"]));
                } else if (status === 'in-progress'){
                    $(this).find('.counters__label').html(num(count, ["Projektów realizowanych", "Projekt realizowany", "Projekty realizowane"]));
                }
                $('#'+status).jQuerySimpleCounter({end: count, duration: 2500});
        
            });
        
        })();

        (function() {
            // animacja ze zmieniającym się gradientem obciąża CPU,
            // więc włączam ją tylko, gdy użytkownik dosroluje do końca strony
            $(window).scroll(function () {
               if ($(window).scrollTop() >= $(document).height() - $(window).height() - 500) {
                  $('.footer-wrapper').addClass('footer-wrapper--animate');
              } else {
                  $('.footer-wrapper').removeClass('footer-wrapper--animate');
              }
            });
        })();

        (function() {
            $(".hero__middleTitle").one('animationend webkitAnimationEnd oAnimationEnd oanimationend MSAnimationEnd',
            function() {
                $(this).removeClass('hero__middleTitle--animation');
            });
            $(".hero__leftTitle").one('animationend webkitAnimationEnd oAnimationEnd oanimationend MSAnimationEnd',
            function() {
                $(this).removeClass('hero__leftTitle--animation');
            });
            $(".hero__rightTitle").one('animationend webkitAnimationEnd oAnimationEnd oanimationend MSAnimationEnd',
            function() {
                $(this).removeClass('hero__rightTitle--animation');
            });
        
        
            $('.hero__left').hover(function() {
                $('.hero__middle').addClass('hero__middle--collapsedL');
                $('.hero__middleTitle').addClass('hero__middleTitle--opacity80');
                $(this).addClass('hero__left--mvR');
            }, function() {
                $('.hero__middle').removeClass('hero__middle--collapsedL');
                $('.hero__middleTitle').removeClass('hero__middleTitle--opacity80');
                $(this).removeClass('hero__left--mvR');
            });
            $('.hero__right').hover(function() {
                $('.hero__middle').addClass('hero__middle--collapsedR');
                $('.hero__middleTitle').addClass('hero__middleTitle--opacity80');
                $(this).addClass('hero__right--mvL');
        
            }, function() {
                $('.hero__middle').removeClass('hero__middle--collapsedR');
                $('.hero__middleTitle').removeClass('hero__middleTitle--opacity80');
                $(this).removeClass('hero__right--mvL');
        
            });
        })();

        // Tak w ogóle, to okno modalne należy oddzielić od
        // SPONSORÓW i WSPÓŁPRACY, zrobić niezależnym elementem
        
        (function() {
            $('.brand').each(function(index) {
                if ($(this).data('brand-desc').length < 1) {
                    $(this).find('.brand__more').remove();
                }
            });
        
            $('.brand__more').bind("click", function(e) {
                e.preventDefault();
                var brand = $(this).parents('.brand');
                var brandName = brand.data('brand-name');
                var brandLink = brand.data('brand-link');
                var brandDesc = brand.data('brand-desc');
                var brandLogo = brand.find('.brand__logo').attr('src');
                console.log(brand, brandName, brandLink, brandDesc, brandLogo);
        
                $('.modal__title').html(brandName);
                $('.modal__content a').html(brandLink).attr('href', brandLink);
                $('.modal__content p').html(brandDesc);
                $('.modal__content p').html(brandDesc);
                $('.modal__image').attr('src', brandLogo);
        
                $("html").addClass("doNotScroll");
                $('.modal').addClass('visible');
            });
        
            //On clicking the modal background
            $('[data-modal-close]').bind("click", function(e) {
                $('.modal').removeClass('visible');
                $("html").removeClass("doNotScroll");
            });
        
        })();

        (function() {
            Slider = $('#slider').Swipe({
              auto: 0,
              continuous: true,
            }).data('Swipe');
            if (Slider) {
              $('.swipe__next').on('click', Slider.next);
              $('.swipe__prev').on('click', Slider.prev);
            }
        
        })();

    });

    // Prezes zawsze na pierwszym miejscu //
    $('.membercard#president').insertBefore('#current_members .cardsWrapper div:eq(0)');

    // Dodaje do <a> klasę "link"
    $('.project__content a').addClass('link');

});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJtYWluLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIG1haW4uanMgLy9cbi8vIFdzenlzdGtvIHdyenVjYW15IHR1XG5cbihmdW5jdGlvbigkKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICB2YXIgX2Rlc3Ryb3lGbjtcblxuICAkLnNjcm9sbHVwYmFyID0gZnVuY3Rpb24oJGJhciwgb3B0aW9ucykge1xuICAgIC8vIERlZmF1bHQgb3B0aW9uc1xuICAgIG9wdGlvbnMgPSAkLmV4dGVuZCh7XG4gICAgICBlbnRlclZpZXdwb3J0OiAkLm5vb3AsXG4gICAgICBmdWxseUVudGVyVmlld3BvcnQ6ICQubm9vcCxcbiAgICAgIGV4aXRWaWV3cG9ydDogJC5ub29wLFxuICAgICAgcGFydGlhbGx5RXhpdFZpZXdwb3J0OiAkLm5vb3BcbiAgICB9LCBvcHRpb25zKTtcblxuICAgIGZ1bmN0aW9uIGlzRnVsbHlJblZpZXdwb3J0KCkge1xuICAgICAgcmV0dXJuICR3aW5kb3cuc2Nyb2xsVG9wKCkgPD0gJGJhci5vZmZzZXQoKS50b3A7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaXNJblZpZXdwb3J0KCkge1xuICAgICAgcmV0dXJuICR3aW5kb3cuc2Nyb2xsVG9wKCkgPCAkYmFyLm9mZnNldCgpLnRvcCArICRiYXIub3V0ZXJIZWlnaHQoKTtcbiAgICB9XG5cbiAgICB2YXIgJHdpbmRvdyA9ICQod2luZG93KSxcbiAgICAgICAgJGRvY3VtZW50ID0gJChkb2N1bWVudCksXG4gICAgICAgIG1pblkgPSAkYmFyLmNzcygncG9zaXRpb24nKSA9PSAnZml4ZWQnID8gMCA6ICRiYXIub2Zmc2V0KCkudG9wLFxuICAgICAgICBsYXN0WSA9ICR3aW5kb3cuc2Nyb2xsVG9wKCksIC8vIFVzZSBsYXN0IFkgdG8gZGV0ZWN0IHNjcm9sbCBkaXJlY3Rpb24uXG4gICAgICAgIGluaXRpYWxQb3NUb3AgPSAkYmFyLnBvc2l0aW9uKCkudG9wLFxuICAgICAgICBpT1MgPSAvKGlQYWR8aVBob25lfGlQb2QpL2cudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxcbiAgICAgICAgdGltZW91dDtcblxuICAgICQuc2Nyb2xsdXBiYXIuaXNJblZpZXdwb3J0ID0gaXNJblZpZXdwb3J0KCk7XG4gICAgJC5zY3JvbGx1cGJhci5pc0Z1bGx5SW5WaWV3cG9ydCA9IGlzRnVsbHlJblZpZXdwb3J0KCk7XG5cbiAgICAvLyBpT1MgY2FuJ3QgaGFuZGxlIG1vbWVudHVtIHNjcm9sbCBwcm9wZXJseSAoU2VlIGRpc2N1c3Npb24gb25cbiAgICAvLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzI4NjM1NDcpLlxuICAgIGlmICghaU9TKSB7XG4gICAgICAkd2luZG93Lm9uKCdzY3JvbGwuc2Nyb2xsdXBiYXInLCBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHkgPSAkd2luZG93LnNjcm9sbFRvcCgpLFxuICAgICAgICAgICAgYmFySGVpZ2h0ID0gJGJhci5vdXRlckhlaWdodCgpO1xuXG4gICAgICAgIC8vIElnbm9yZSBlbGFzdGljIHNjcm9sbGluZy5cbiAgICAgICAgaWYgKHkgPCAwIHx8IHkgPiAoJGRvY3VtZW50LmhlaWdodCgpIC0gJHdpbmRvdy5oZWlnaHQoKSkpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDYW5jZWwgdGhlIGV2ZW50IGZpcmVkIGJ5IHRoZSBwcmV2aW91cyBzY3JvbGwuXG4gICAgICAgIGlmICh0aW1lb3V0KSB7XG4gICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHkgPCBsYXN0WSkgeyAvLyBTY3JvbGxpbmcgdXBcbiAgICAgICAgICAvLyBJZiB0aGUgYmFyIGlzIGhpZGRlbiwgcGxhY2UgaXQgcmlnaHQgYWJvdmUgdGhlIHRvcCBmcmFtZS5cbiAgICAgICAgICBpZiAoISQuc2Nyb2xsdXBiYXIuaXNJblZpZXdwb3J0ICYmIGxhc3RZIC0gYmFySGVpZ2h0ID49IG1pblkpIHtcbiAgICAgICAgICAgICRiYXIuY3NzKCd0b3AnLCBsYXN0WSAtIGJhckhlaWdodCk7XG4gICAgICAgICAgICAkLnNjcm9sbHVwYmFyLmlzSW5WaWV3cG9ydCA9IHRydWU7XG4gICAgICAgICAgICBvcHRpb25zLmVudGVyVmlld3BvcnQoKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBTY3JvbGxzIHVwIGJpZ2dlciB0aGFuIHRoZSBiYXIncyBoZWlnaHQgZml4ZXMgdGhlIGJhciBvbiB0b3AuXG4gICAgICAgICAgaWYgKGlzRnVsbHlJblZpZXdwb3J0KCkpIHtcbiAgICAgICAgICAgIGlmICh5ID49IG1pblkpIHtcbiAgICAgICAgICAgICAgJGJhci5jc3Moe1xuICAgICAgICAgICAgICAgICdwb3NpdGlvbic6ICdmaXhlZCcsXG4gICAgICAgICAgICAgICAgJ3RvcCc6IDBcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAkYmFyLmNzcyh7XG4gICAgICAgICAgICAgICAgJ3Bvc2l0aW9uJzogJ2Fic29sdXRlJyxcbiAgICAgICAgICAgICAgICAndG9wJzogaW5pdGlhbFBvc1RvcFxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCEkLnNjcm9sbHVwYmFyLmlzRnVsbHlJblZpZXdwb3J0KSB7XG4gICAgICAgICAgICAgICQuc2Nyb2xsdXBiYXIuaXNGdWxseUluVmlld3BvcnQgPSB0cnVlO1xuICAgICAgICAgICAgICBvcHRpb25zLmZ1bGx5RW50ZXJWaWV3cG9ydCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIEZpcmUgYW4gZXZlbnQgdG8gcmV2ZWFsIHRoZSBlbnRpcmUgYmFyIGFmdGVyIDQwMG1zIGlmIHRoZSBzY3JvbGxcbiAgICAgICAgICAvLyB3YXNuJ3QgYmlnIGVub3VnaC5cbiAgICAgICAgICB0aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICghaXNGdWxseUluVmlld3BvcnQoKSkge1xuICAgICAgICAgICAgICAkYmFyLmNzcyh7XG4gICAgICAgICAgICAgICAgJ3Bvc2l0aW9uJzogJ2ZpeGVkJyxcbiAgICAgICAgICAgICAgICAndG9wJzogJGJhci5vZmZzZXQoKS50b3AgLSB5XG4gICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICRiYXIuYW5pbWF0ZSh7J3RvcCc6IDB9LCAxMDAsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICQuc2Nyb2xsdXBiYXIuaXNGdWxseUluVmlld3BvcnQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIG9wdGlvbnMuZnVsbHlFbnRlclZpZXdwb3J0KCk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sIDQwMCk7XG4gICAgICAgIH0gZWxzZSBpZiAoeSA+IGxhc3RZKSB7IC8vIFNjcm9sbGluZyBkb3duXG4gICAgICAgICAgLy8gVW5maXggdGhlIGJhciBhbGxvd2luZyBpdCB0byBzY3JvbGwgd2l0aCB0aGUgcGFnZS5cbiAgICAgICAgICBpZiAoJC5zY3JvbGx1cGJhci5pc0Z1bGx5SW5WaWV3cG9ydCkge1xuICAgICAgICAgICAgJGJhci5jc3Moe1xuICAgICAgICAgICAgICAncG9zaXRpb24nOiAnYWJzb2x1dGUnLFxuICAgICAgICAgICAgICAndG9wJzogbGFzdFkgPiBtaW5ZID8gbGFzdFkgOiBpbml0aWFsUG9zVG9wXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKCFpc0Z1bGx5SW5WaWV3cG9ydCgpKSB7XG4gICAgICAgICAgICAgICQuc2Nyb2xsdXBiYXIuaXNGdWxseUluVmlld3BvcnQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgb3B0aW9ucy5wYXJ0aWFsbHlFeGl0Vmlld3BvcnQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoJC5zY3JvbGx1cGJhci5pc0luVmlld3BvcnQgJiYgIWlzSW5WaWV3cG9ydCgpKSB7XG4gICAgICAgICAgICAkLnNjcm9sbHVwYmFyLmlzSW5WaWV3cG9ydCA9IGZhbHNlO1xuICAgICAgICAgICAgb3B0aW9ucy5leGl0Vmlld3BvcnQoKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBGaXJlIGFuIGV2ZW50IHRvIGhpZGUgdGhlIGVudGlyZSBiYXIgYWZ0ZXIgNDAwbXMgaWYgdGhlIHNjcm9sbFxuICAgICAgICAgIC8vIHdhc24ndCBiaWcgZW5vdWdoLlxuICAgICAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKGlzSW5WaWV3cG9ydCgpICYmIHkgLSBiYXJIZWlnaHQgPj0gbWluWSkge1xuICAgICAgICAgICAgICAkYmFyLmFuaW1hdGUoeyd0b3AnOiB5IC0gYmFySGVpZ2h0fSwgMTAwLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAkLnNjcm9sbHVwYmFyLmlzSW5WaWV3cG9ydCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIG9wdGlvbnMuZXhpdFZpZXdwb3J0KCk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sIDQwMCk7XG4gICAgICAgIH1cblxuICAgICAgICBsYXN0WSA9IHk7XG4gICAgICB9KTtcbiAgICB9IGVsc2UgeyAvLyBGYWxsYmFjayBzaW1wbGlmaWVkIGJlaGF2aW91ciBmb3IgaU9TLlxuICAgICAgJHdpbmRvdy5vbigndG91Y2hzdGFydC5zY3JvbGx1cGJhcicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgbGFzdFkgPSAkd2luZG93LnNjcm9sbFRvcCgpO1xuICAgICAgfSk7XG5cbiAgICAgICR3aW5kb3cub24oJ3RvdWNoZW5kLnNjcm9sbHVwYmFyJywgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgeSA9ICR3aW5kb3cuc2Nyb2xsVG9wKCk7XG5cbiAgICAgICAgaWYgKHkgPCBsYXN0WSB8fCB5IC0gJGJhci5vdXRlckhlaWdodCgpIDwgbWluWSkgeyAvLyBTY3JvbGxpbmcgdXBcbiAgICAgICAgICBpZiAoeSA8PSBtaW5ZKSB7XG4gICAgICAgICAgICAvLyBSZXN0b3JlIG9yaWdpbmFsIHBvc2l0aW9uLlxuICAgICAgICAgICAgJGJhci5jc3Moe1xuICAgICAgICAgICAgICAncG9zaXRpb24nOiAnYWJzb2x1dGUnLFxuICAgICAgICAgICAgICAndG9wJzogaW5pdGlhbFBvc1RvcFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICRiYXIuc2hvdyhmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgJC5zY3JvbGx1cGJhci5pc0luVmlld3BvcnQgPSB0cnVlO1xuICAgICAgICAgICAgICAkLnNjcm9sbHVwYmFyLmlzRnVsbHlJblZpZXdwb3J0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgb3B0aW9ucy5lbnRlclZpZXdwb3J0KCk7XG4gICAgICAgICAgICAgIG9wdGlvbnMuZnVsbHlFbnRlclZpZXdwb3J0KCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJGJhci5jc3Moe1xuICAgICAgICAgICAgICAncG9zaXRpb24nOiAnZml4ZWQnLFxuICAgICAgICAgICAgICAndG9wJzogMFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICQuc2Nyb2xsdXBiYXIuaXNJblZpZXdwb3J0ID0gdHJ1ZTtcbiAgICAgICAgICAgIG9wdGlvbnMuZW50ZXJWaWV3cG9ydCgpO1xuXG4gICAgICAgICAgICAkYmFyLnNsaWRlRG93bihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgJC5zY3JvbGx1cGJhci5pc0Z1bGx5SW5WaWV3cG9ydCA9IHRydWU7XG4gICAgICAgICAgICAgIG9wdGlvbnMuZnVsbHlFbnRlclZpZXdwb3J0KCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoeSA+IGxhc3RZKSB7IC8vIFNjcm9sbGluZyBkb3duXG4gICAgICAgICAgJC5zY3JvbGx1cGJhci5pc0Z1bGx5SW5WaWV3cG9ydCA9IGZhbHNlO1xuICAgICAgICAgIG9wdGlvbnMucGFydGlhbGx5RXhpdFZpZXdwb3J0KCk7XG5cbiAgICAgICAgICAkYmFyLnNsaWRlVXAoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkLnNjcm9sbHVwYmFyLmlzSW5WaWV3cG9ydCA9IGZhbHNlO1xuICAgICAgICAgICAgb3B0aW9ucy5leGl0Vmlld3BvcnQoKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxhc3RZID0geTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIF9kZXN0cm95Rm4gPSBmdW5jdGlvbigpIHtcbiAgICAgIC8vIFVuYmluZCBhbGwgbGlzdGVuZXJzIGFkZGVkIGJ5IHNjcm9sbHVwYmFyIHBsdWdpblxuICAgICAgJHdpbmRvdy5vZmYoJy5zY3JvbGx1cGJhcicpO1xuXG4gICAgICAvLyBSZXN0b3JlIG9yaWdpbmFsIGJhciBwb3NpdGlvbi5cbiAgICAgICRiYXIuY3NzKHtcbiAgICAgICAgJ3Bvc2l0aW9uJzogJ2Fic29sdXRlJyxcbiAgICAgICAgJ3RvcCc6IGluaXRpYWxQb3NUb3BcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICByZXR1cm4gJGJhcjtcbiAgfTtcblxuICAkLnNjcm9sbHVwYmFyLmRlc3Ryb3kgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoX2Rlc3Ryb3lGbikge1xuICAgICAgcmV0dXJuIF9kZXN0cm95Rm4oKTtcbiAgICB9XG4gIH07XG5cbiAgJC5mbi5zY3JvbGx1cGJhciA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICByZXR1cm4gJC5zY3JvbGx1cGJhcih0aGlzLCBvcHRpb25zKTtcbiAgfTtcbn0pKGpRdWVyeSk7XG5cbi8vLy89IC4uLy4uL2Jvd2VyX2NvbXBvbmVudHMvZGYtdmlzaWJsZS9qcXVlcnkudmlzaWJsZS5qc1xuXG5qUXVlcnkoZnVuY3Rpb24oJCkge1xuXG4gICAgLyoqXG4gICAgICogRHJvcHlcbiAgICAgKiBodHRwOi8vY29kZXBlbi5pby9Ub21iZWsvcGVuL09QdnBMZVxuICAgICAqL1xuICAgIHZhciBkcm9weSA9IHtcbiAgICAgICRkcm9weXM6IG51bGwsXG4gICAgICBvcGVuQ2xhc3M6ICdvcGVuJyxcbiAgICAgIHNlbGVjdENsYXNzOiAnc2VsZWN0ZWQnLFxuICAgICAgaW5pdDogZnVuY3Rpb24oKXtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIFxuICAgICAgICBzZWxmLiRkcm9weXMgPSAkKCcuZHJvcHknKTtcbiAgICAgICAgc2VsZi5ldmVudEhhbmRsZXIoKTtcbiAgICAgIH0sXG4gICAgICBldmVudEhhbmRsZXI6IGZ1bmN0aW9uKCl7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBcbiAgICAgICAgLy8gT3BlbmluZyBhIGRyb3B5XG4gICAgICAgIHNlbGYuJGRyb3B5cy5maW5kKCcuZHJvcHlfX3RpdGxlJykuY2xpY2soZnVuY3Rpb24oKXtcbiAgICAgICAgICBzZWxmLiRkcm9weXMucmVtb3ZlQ2xhc3Moc2VsZi5vcGVuQ2xhc3MpO1xuICAgICAgICAgICQodGhpcykucGFyZW50cygnLmRyb3B5JykuYWRkQ2xhc3Moc2VsZi5vcGVuQ2xhc3MpO1xuICAgICAgICB9KTtcbiAgICBcbiAgICAgICAgLy8gQ2xpY2sgb24gYSBkcm9weSBsaXN0XG4gICAgICAgIHNlbGYuJGRyb3B5cy5maW5kKCcuZHJvcHlfX2NvbnRlbnQgdWwgbGkgYScpLmNsaWNrKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgdmFyICR0aGF0ID0gJCh0aGlzKTtcbiAgICAgICAgICB2YXIgJGRyb3B5ID0gJHRoYXQucGFyZW50cygnLmRyb3B5Jyk7XG4gICAgICAgICAgdmFyICRpbnB1dCA9ICRkcm9weS5maW5kKCdpbnB1dCcpO1xuICAgICAgICAgIHZhciAkdGl0bGUgPSAkKHRoaXMpLnBhcmVudHMoJy5kcm9weScpLmZpbmQoJy5kcm9weV9fdGl0bGUgc3BhbicpO1xuICAgIFxuICAgICAgICAgIC8vIFJlbW92ZSBzZWxlY3RlZCBjbGFzc1xuICAgICAgICAgICRkcm9weS5maW5kKCcuZHJvcHlfX2NvbnRlbnQgYScpLmVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3Moc2VsZi5zZWxlY3RDbGFzcyk7XG4gICAgICAgICAgfSk7XG4gICAgXG4gICAgICAgICAgLy8gVXBkYXRlIHNlbGVjdGVkIHZhbHVlXG4gICAgICAgICAgJHRpdGxlLmh0bWwoJHRoYXQuaHRtbCgpKTtcbiAgICAgICAgICAkaW5wdXQudmFsKCR0aGF0LmF0dHIoJ2RhdGEtdmFsdWUnKSkudHJpZ2dlcignY2hhbmdlJyk7XG4gICAgXG4gICAgICAgICAgLy8gSWYgYmFjayB0byBkZWZhdWx0LCByZW1vdmUgc2VsZWN0ZWQgY2xhc3MgZWxzZSBhZGRjbGFzcyBvbiByaWdodCBlbGVtZW50XG4gICAgICAgICAgaWYoJHRoYXQuaGFzQ2xhc3MoJ2Ryb3B5X19oZWFkZXInKSl7XG4gICAgICAgICAgICAkdGl0bGUucmVtb3ZlQ2xhc3Moc2VsZi5zZWxlY3RDbGFzcyk7XG4gICAgICAgICAgICAkdGl0bGUuaHRtbCgkdGl0bGUuYXR0cignZGF0YS10aXRsZScpKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICR0aXRsZS5hZGRDbGFzcyhzZWxmLnNlbGVjdENsYXNzKTtcbiAgICAgICAgICAgICR0aGF0LmFkZENsYXNzKHNlbGYuc2VsZWN0Q2xhc3MpO1xuICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAvLyBDbG9zZSBkcm9wZG93blxuICAgICAgICAgICRkcm9weS5yZW1vdmVDbGFzcyhzZWxmLm9wZW5DbGFzcyk7XG4gICAgICAgIH0pO1xuICAgIFxuICAgICAgICAvLyBDbG9zZSBhbGwgZHJvcGRvd24gb25jbGljayBvbiBhbm90aGVyIGVsZW1lbnRcbiAgICAgICAgJChkb2N1bWVudCkuYmluZCgnY2xpY2snLCBmdW5jdGlvbihlKXtcbiAgICAgICAgICAgIGlmICghICQoZS50YXJnZXQpLnBhcmVudHMoKS5oYXNDbGFzcygnZHJvcHknKSl7IHNlbGYuJGRyb3B5cy5yZW1vdmVDbGFzcyhzZWxmLm9wZW5DbGFzcyk7IH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfTtcbiAgICBcbiAgICAkKGZ1bmN0aW9uKCl7XG4gICAgICBkcm9weS5pbml0KCk7XG4gICAgfSk7XG5cbiAgICAgICBmdW5jdGlvbiBjYXJkRXhjZXJwdCgpIHtcbiAgICAgICAgJChcIi5jYXJkX19leGNlcnB0XCIpLnRleHQoZnVuY3Rpb24oaW5kZXgsIGN1cnJlbnRUZXh0KSB7XG4gICAgICAgICAgcmV0dXJuIGN1cnJlbnRUZXh0LnN1YnN0cigwLCAxMjUpICsgJ1xcdTIwMjYnO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGNhcmRFeGNlcnB0KCk7XG5cbiAgICAvLyBQYWt1amUgbW5pZWpzemUgb2JyYXpraSBiZXogcG9kcGlzdSB3IDxmaWd1cmU+IC8vXG4gICAgLy8gSmXFm2xpIG9icmF6ZWsgbWEgdHl0dcWCLCB0eW0gc2nEmSB6YWptdWplIHBocCBmdW5rY2phIHcgcHJvamVjdC1mdW5jdGlvbnMucGhwXG4gICAgJCgnLnByb2plY3RfX2NvbnRlbnQgcCcpLmVhY2goZnVuY3Rpb24oaW5kZXgpIHtcbiAgICAgIHZhciBzb21lX2ltZyA9ICQodGhpcykuZmluZCgnaW1nJyk7XG4gICAgICB2YXIgd2lkdGggPSBzb21lX2ltZy53aWR0aCgpO1xuICAgICAgaWYgKHdpZHRoIDwgOTgwKSB7XG4gICAgICAgIHNvbWVfaW1nLndyYXAoXCI8ZmlndXJlPjwvZmlndXJlPlwiKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIE5vdHlmaWthY2plLCBwb3dpYWRvbWllbmlhIC8vXG4gICAgJChcIi5ub3RlLWNsb3NlXCIpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgJCh0aGlzKS5wYXJlbnQoKVxuICAgICAgICAuYW5pbWF0ZSh7XG4gICAgICAgICAgb3BhY2l0eTogMFxuICAgICAgICB9LCAyNTAsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICQodGhpcylcbiAgICAgICAgICAgIC5hbmltYXRlKHtcbiAgICAgICAgICAgICAgbWFyZ2luQm90dG9tOiAwXG4gICAgICAgICAgICB9LCAyNTApXG4gICAgICAgICAgICAuY2hpbGRyZW4oKVxuICAgICAgICAgICAgLmFuaW1hdGUoe1xuICAgICAgICAgICAgICBwYWRkaW5nOiAwXG4gICAgICAgICAgICB9LCAyNTApXG4gICAgICAgICAgICAud3JhcElubmVyKFwiPGRpdiAvPlwiKVxuICAgICAgICAgICAgLmNoaWxkcmVuKClcbiAgICAgICAgICAgIC5zbGlkZVVwKDI1MCwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICQodGhpcykuY2xvc2VzdChcIi5ub3RlXCIpLnJlbW92ZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLy8gQW5pbWFjamUgZGxhIGJhbmVyYSByZWtydXRhY2ppIC8vXG4gICAgJCgnbGFiZWwuYnV0dG9uJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAkKCcuZmInKS5hZGRDbGFzcygnYW5pbWF0ZWQgZmFkZUluVXAnKTtcbiAgICAgICQoJy5kYXRlIC5pY29uLWNvbnRhaW5lcicpLmFkZENsYXNzKCdhbmltYXRlZCBzbGlkZUluTGVmdCcpO1xuICAgICAgJCgnLmRhdGUgc3BhbicpLmFkZENsYXNzKCdhbmltYXRlZCBzbGlkZUluTGVmdCcpO1xuICAgICAgJCgnLmxvY2F0aW9uIC5pY29uLWNvbnRhaW5lcicpLmFkZENsYXNzKCdhbmltYXRlZCBzbGlkZUluUmlnaHQnKTtcbiAgICAgICQoJy5sb2NhdGlvbiBzcGFuJykuYWRkQ2xhc3MoJ2FuaW1hdGVkIHNsaWRlSW5SaWdodCcpO1xuICAgIFxuICAgIH0pO1xuICAgICQoJyNjbG9zZV9iYW5uZXInKS5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAgICQoJy5mYicpLnJlbW92ZUNsYXNzKCdhbmltYXRlZCBmYWRlSW5VcCcpO1xuICAgICAgJCgnLmRhdGUgLmljb24tY29udGFpbmVyJykucmVtb3ZlQ2xhc3MoJ2FuaW1hdGVkIHNsaWRlSW5MZWZ0Jyk7XG4gICAgICAkKCcuZGF0ZSBzcGFuJykucmVtb3ZlQ2xhc3MoJ2FuaW1hdGVkIHNsaWRlSW5MZWZ0Jyk7XG4gICAgICAkKCcubG9jYXRpb24gLmljb24tY29udGFpbmVyJykucmVtb3ZlQ2xhc3MoJ2FuaW1hdGVkIHNsaWRlSW5SaWdodCcpO1xuICAgICAgJCgnLmxvY2F0aW9uIHNwYW4nKS5yZW1vdmVDbGFzcygnYW5pbWF0ZWQgc2xpZGVJblJpZ2h0Jyk7XG4gICAgfSk7XG4gICAgXG4gICAgLy8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8yNDA3MDYyNy9jcmVhdGUtZHJvcGRvd24tYmFubmVyLXdoZW4tdXNlci1maXJzdC12aXNpdHMtd2Vic2l0ZVxuICAgIC8vIFBvendhbGFqxIUgb3R3aWVyYcSHIGJhbmVyIHR5bGtvIHByenkgcGllcndzemVqIHdpenljaWVcbiAgICBcbiAgICAvLyBjb29raWUtanNcblxuICAgIC8vLy8gPSBwYXJ0aWFscy9zaG93LW5pY2tuYW1lcy5qc1xuXG4gICAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKXtcbiAgICAgICAgLy8gJChcIiNuYXYtbW9iaWxlXCIpLmh0bWwoJChcIiNuYXYtbWFpblwiKS5odG1sKCkpO1xuICAgICAgICAkKFwiI25hdi10cmlnZ2VyIC5uYXZpY29uLWJ1dHRvblwiKS5jbGljayhmdW5jdGlvbigpe1xuICAgICAgICAgIGNvbnNvbGUuaW5mbygnQnVyZ2VyIGNsaWNrZWQnKTtcbiAgICAgICAgICAgIGlmICgkKFwiI25hdiB1bFwiKS5oYXNDbGFzcyhcIm5hdl9fbWVudS0tZXhwYW5kZWRcIikpIHtcbiAgICAgICAgICAgICAgICAkKFwiI25hdiB1bFwiKS5yZW1vdmVDbGFzcyhcIm5hdl9fbWVudS0tZXhwYW5kZWRcIikuc2xpZGVVcCgyNTApO1xuICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoXCJvcGVuXCIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkKFwiI25hdiB1bFwiKS5hZGRDbGFzcyhcIm5hdl9fbWVudS0tZXhwYW5kZWRcIikuc2xpZGVEb3duKDI1MCk7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcyhcIm9wZW5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgKGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyDFu2VieSB0b29sdGlwIG5pZSBrbGlrYcWCXG4gICAgICAgICQoJy50b29sdGlwJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9KTtcbiAgICBcbiAgICAgICAgJCgnW2RhdGEtZ2l0aHViXScpLmhvdmVyKGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGxvYWRHaXRodWIoKTtcbiAgICAgICAgICAgICQodGhpcykuY2hpbGRyZW4oJy50b29sdGlwJykuYWRkQ2xhc3MoJ3Rvb2x0aXAtLWFjdGl2ZScpO1xuICAgICAgICB9LCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAkKHRoaXMpLmNoaWxkcmVuKCcudG9vbHRpcCcpLnJlbW92ZUNsYXNzKCd0b29sdGlwLS1hY3RpdmUnKTtcbiAgICAgICAgfSk7XG4gICAgXG4gICAgICAgICQoJ1tkYXRhLWxhc3RmbV0nKS5ob3ZlcihmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBsb2FkTGFzdGZtKCk7XG4gICAgICAgICAgICAkKHRoaXMpLmNoaWxkcmVuKCcudG9vbHRpcCcpLmFkZENsYXNzKCd0b29sdGlwLS1hY3RpdmUnKTtcbiAgICAgICAgfSwgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgJCh0aGlzKS5jaGlsZHJlbignLnRvb2x0aXAnKS5yZW1vdmVDbGFzcygndG9vbHRpcC0tYWN0aXZlJyk7XG4gICAgICAgIH0pO1xuICAgIH0pKCk7XG5cbiAgICBmdW5jdGlvbiBsb2FkR2l0aHViKCkge1xuICAgICAgICAvLyBQb2JpZXJhIHVybCB6IGhyZWZhXG4gICAgICAgIHZhciBwcm9maWxlVXJsID0gJCgnYVtkYXRhLWdpdGh1Yl0nKS5hdHRyKCdocmVmJyk7XG4gICAgICAgIC8vIE9kcG93aWVkbmlvIG9iY2luYSBnbyBkbyB1c2VybmFtZVxuICAgICAgICB2YXIgdXNlcm5hbWUgPSBwcm9maWxlVXJsLnN1YnN0cigxOSk7XG4gICAgICAgIC8vIERvZGFqZSB1c2VybmFtZSBkbyB1cmwgemFweXRhbmlhXG4gICAgICAgIHZhciByZXF1cmkgPSAnaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS91c2Vycy8nICsgdXNlcm5hbWU7XG4gICAgICAgIC8vIFNwcmF3ZHphLCBjenkgdG9vbHRpcCBwdXN0eSwgYnkgbmllIGdlbmVyb3dhxIcgbm93eWNoIHphcHl0YcWEXG4gICAgICAgIC8vIGkgbmllIGRvZGF3YcSHIHBvIHJheiBrb2xlam55IGRhbmUgZG8gdG9vbHRpcGFcbiAgICAgICAgaWYgKCQoJ1tkYXRhLWdpdGh1Yl0gLnRvb2x0aXAnKS5pcygnOmVtcHR5JykpIHtcbiAgICAgICAgICAgIHJlcXVlc3RKU09OKHJlcXVyaSwgZnVuY3Rpb24oanNvbikge1xuICAgICAgICAgICAgICAgIGlmIChqc29uLm1lc3NhZ2UgPT09IFwiTmllIHpuYWxlemlvbm9cIiB8fCB1c2VybmFtZSA9PT0gJycpIHtcbiAgICAgICAgICAgICAgICAgICAgJCgnW2RhdGEtZ2l0aHViXSAudG9vbHRpcCcpLmh0bWwoXCI8aDI+QnJhayBpbmZvcm1hY2ppPC9oMj5cIik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWUgPSBqc29uLmxvZ2luO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcHJvZmlsZXVybCA9IGpzb24uaHRtbF91cmw7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXBvc251bSA9IGpzb24ucHVibGljX3JlcG9zO1xuICAgICAgICAgICAgICAgICAgICB2YXIgYXZpdXJsID0ganNvbi5hdmF0YXJfdXJsO1xuICAgIFxuICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgb3V0aHRtbCA9ICc8ZGl2IGNsYXNzPVwiZ2hcIj4nICtcbiAgICAgICAgICAgICAgICAgICAgICAgICc8aDQgY2xhc3M9XCJnaF9fbmFtZVwiPjxhIGNsYXNzPVwibGlua1wiIGhyZWY9XCInICsgcHJvZmlsZXVybCArICdcIj48aW1nIGNsYXNzPVwiZ2hfX2F2YXRhclwiIHNyYz1cIicgKyBhdml1cmwgKyAnXCI+QCcgKyB1c2VybmFtZSArICc8L2E+PC9oND4nO1xuICAgICAgICAgICAgICAgICAgICBvdXRodG1sID0gb3V0aHRtbCArICc8c3BhbiBjbGFzcz1cImdoX19yZXBvc1wiPlJlcG96eXRvcmnDs3c6ICcgKyByZXBvc251bSArICc8L3NwYW4+PGhyLz48L2Rpdj4nO1xuICAgICAgICAgICAgICAgICAgICAkKCdbZGF0YS1naXRodWJdIC50b29sdGlwJykuYXBwZW5kKG91dGh0bWwpO1xuICAgIFxuICAgICAgICAgICAgICAgIH0gLy8gZW5kIGVsc2Ugc3RhdGVtZW50XG4gICAgICAgICAgICB9KTsgLy8gZW5kIHJlcXVlc3RKU09OIEFqYXggY2FsbFxuICAgICAgICB9XG4gICAgXG4gICAgICAgIGZ1bmN0aW9uIHJlcXVlc3RKU09OKHVybCwgY2FsbGJhY2spIHtcbiAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uKHhocikge1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjay5jYWxsKG51bGwsIHhoci5yZXNwb25zZUpTT04pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbG9hZExhc3RmbSgpIHtcbiAgICAgICAgLy8gUG9iaWVyYSB1cmwgeiBocmVmYVxuICAgICAgICB2YXIgcHJvZmlsZVVybCA9ICQoJ2FbZGF0YS1sYXN0Zm1dJykuYXR0cignaHJlZicpO1xuICAgICAgICAvLyBPZHBvd2llZG5pbyBvYmNpbmEgZ28gZG8gdXNlcm5hbWVcbiAgICAgICAgdmFyIHVzZXJuYW1lID0gcHJvZmlsZVVybC5zdWJzdHIoMjcpO1xuICAgICAgICB2YXIgYmFzZVVybCA9ICdodHRwOi8vd3MuYXVkaW9zY3JvYmJsZXIuY29tLzIuMC8/bWV0aG9kPXVzZXIuZ2V0cmVjZW50dHJhY2tzJztcbiAgICAgICAgdmFyIGFwaV9rZXkgPSAnMjk5MDIwYzA2MmM0ODFmMDgzZWNkMDI3NmMzMTVlM2EnO1xuICAgIFxuICAgICAgICB2YXIgcmVxdWVzdFVybCA9IGJhc2VVcmwgKyAnJnVzZXI9JyArIHVzZXJuYW1lICsgJyZhcGlfa2V5PScgKyBhcGlfa2V5ICsgJyZmb3JtYXQ9anNvbic7XG4gICAgICAgIGNvbnNvbGUubG9nKHVzZXJuYW1lKTtcbiAgICAgICAgaWYgKCQoJ1tkYXRhLWxhc3RmbV0gLnRvb2x0aXAnKS5pcygnOmVtcHR5JykpIHtcbiAgICAgICAgICAgICQuZ2V0SlNPTihyZXF1ZXN0VXJsLCBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgdmFyIGFydGlzdCA9IGRhdGEucmVjZW50dHJhY2tzLnRyYWNrWzBdLmFydGlzdFtcIiN0ZXh0XCJdO1xuICAgICAgICAgICAgICAgIHZhciBzb25nID0gZGF0YS5yZWNlbnR0cmFja3MudHJhY2tbMF1bXCJuYW1lXCJdO1xuICAgICAgICAgICAgICAgIHZhciBjb3ZlciA9IGRhdGEucmVjZW50dHJhY2tzLnRyYWNrWzBdLmltYWdlWzNdW1wiI3RleHRcIl07XG4gICAgICAgICAgICAgICAgaWYgKGNvdmVyID09PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvdmVyID0gXCJodHRwOi8vaW1nMi1hay5sc3QuZm0vaS91LzE3NHMvNDEyOGE2ZWIyOWY5NDk0M2M5ZDIwNmMwOGU2MjU5MDQucG5nXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBvdXRodG1sID0gJzxkaXYgY2xhc3M9XCJsZlwiPjxpbWcgY2xhc3M9XCJsZl9fY292ZXJcIiBzcmM9XCInICsgY292ZXIgKyAnXCIvPjxkaXYgY2xhc3M9XCJsZl9fdHJhY2tJbmZvXCI+PHNwYW4gY2xhc3M9XCJsZl9fYXJ0aXN0XCI+JyArIGFydGlzdCArICc8L3NwYW4+PHNwYW4gY2xhc3M9XCJsZl9fc29uZ1wiPicgKyBzb25nICsgJzwvc3Bhbj48L2Rpdj48L2Rpdj4nO1xuICAgICAgICAgICAgICAgICQoJ1tkYXRhLWxhc3RmbV0gLnRvb2x0aXAnKS5hcHBlbmQob3V0aHRtbCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgICQoZnVuY3Rpb24oKSB7XG4gICAgICAgICQoJ2FbaHJlZio9XCIjXCJdOm5vdCgubGluay0tdGFiKScpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKGxvY2F0aW9uLnBhdGhuYW1lLnJlcGxhY2UoL15cXC8vLCAnJykgPT0gdGhpcy5wYXRobmFtZS5yZXBsYWNlKC9eXFwvLywgJycpICYmIGxvY2F0aW9uLmhvc3RuYW1lID09IHRoaXMuaG9zdG5hbWUpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gJCh0aGlzLmhhc2gpO1xuICAgICAgICAgICAgICAgIHRhcmdldCA9IHRhcmdldC5sZW5ndGggPyB0YXJnZXQgOiAkKCdbbmFtZT0nICsgdGhpcy5oYXNoLnNsaWNlKDEpICsgJ10nKTtcbiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0Lmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAkKCdodG1sLCBib2R5JykuYW5pbWF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxUb3A6IHRhcmdldC5vZmZzZXQoKS50b3BcbiAgICAgICAgICAgICAgICAgICAgfSwgODAwKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcbiAgICAgICAgICB2YXIgYkxhenkgPSBuZXcgQmxhenkoe1xuICAgICAgICAgICAgb2Zmc2V0OiAyMCxcbiAgICAgICAgICAgIHNlbGVjdG9yOiAnLmJsYXp5JyxcbiAgICAgICAgICAgIGxvYWRJbnZpc2libGU6IGZhbHNlLFxuICAgICAgICAgICAgYnJlYWtwb2ludHM6IFt7XG4gICAgICAgICAgICAgIHdpZHRoOiAzNjAsIC8vIE1heC13aWR0aFxuICAgICAgICAgICAgICBzcmM6ICdkYXRhLXNyYy1zbWFsbCdcbiAgICAgICAgICAgIH1dLFxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oZWxlbWVudCkge1xuICAgICAgICAgICAgICAkKGVsZW1lbnQpLnBhcmVudCgpLnJlbW92ZUNsYXNzKCdsb2FkaW5nJywgNTAwKTtcbiAgICAgICAgICAgICAgdXBkYXRlQ291bnRlcigpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbihlbGVtZW50LCBtc2cpIHtcbiAgICAgICAgICAgICAgaWYgKG1zZyA9PT0gJ21pc3NpbmcnKSB7XG4gICAgICAgICAgICAgICAgJChlbGVtZW50KS5wYXJlbnQoKS5yZW1vdmVDbGFzcygnbG9hZGluZycsIDUwMCk7IC8vIERhdGEtc3JjIGlzIG1pc3NpbmdcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiYkxhenk6IGRhdGEtc3JjIGlzIG1pc3NpbmdcIik7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAobXNnID09PSAnaW52YWxpZCcpIHtcbiAgICAgICAgICAgICAgICAkKGVsZW1lbnQpLnBhcmVudCgpLnJlbW92ZUNsYXNzKCdsb2FkaW5nJywgNTAwKTtcbiAgICAgICAgICAgICAgICAvLyBEYXRhLXNyYyBpcyBpbnZhbGlkXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcImJMYXp5OiBkYXRhLXNyYyBpcyBpbnZhbGlkXCIpO1xuICAgICAgICBcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIC8vIG5vdCBuZWVkZWQsIG9ubHkgaGVyZSB0byBpbGx1c3RyYXRlIGFtb3VudCBvZiBsb2FkZWQgaW1hZ2VzXG4gICAgICAgICAgdmFyIGltYWdlTG9hZGVkID0gMDtcbiAgICAgICAgXG4gICAgICAgICAgZnVuY3Rpb24gdXBkYXRlQ291bnRlcigpIHtcbiAgICAgICAgICAgIGltYWdlTG9hZGVkKys7XG4gICAgICAgICAgICBjb25zb2xlLmluZm8oXCJiTGF6eTogSW1hZ2VzIGxvYWRlZDogJWRcIiwgaW1hZ2VMb2FkZWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgICAgLy8gdGFicyhiTGF6eSk7XG5cbiAgICAgICAgLy8vLz0gbWVtYmVyLmpzXG5cbiAgICAgICAgLy9Ta3JhY2EgaW1pb25hLCBieSBuaWUgd3ljaG9kemnFgnkgemEgYmxva2lcbiAgICAgICAgJCgnLm1lbWJlcmNhcmRfX25hbWUgYScpLmVhY2goZnVuY3Rpb24oaW5kZXgpIHtcbiAgICAgICAgICAgIHZhciBhID0gJCh0aGlzKTtcbiAgICAgICAgICAgIGlmIChhLmh0bWwoKS5sZW5ndGggPiAxNykge1xuICAgICAgICAgICAgICAgIHZhciBuYW1lID0gYS50ZXh0KCk7XG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2cobmFtZSk7XG4gICAgICAgICAgICAgICAgdmFyIHRyaW1tZWRfbmFtZSA9IG5hbWUuY2hhckF0KDApICsgXCIuIFwiICsgbmFtZS5zdWJzdHIobmFtZS5pbmRleE9mKCcgJykgKyAxKTtcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0cmltbWVkX25hbWUpO1xuICAgICAgICAgICAgICAgIGEudGV4dCh0cmltbWVkX25hbWUpO1xuICAgICAgICAgICAgICAgIGlmIChhLmh0bWwoKS5sZW5ndGggPiAxNykge1xuICAgICAgICAgICAgICAgICAgICBhLnBhcmVudCgpLmFkZENsYXNzKCdtZW1iZXJjYXJkX19uYW1lLS10b29Mb25nJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgICQoJy5tZW1iZXJjYXJkU21hbGxfX25hbWUgYScpLmVhY2goZnVuY3Rpb24oaW5kZXgpIHtcbiAgICAgICAgICAgIHZhciBsZW5ndGggPSAkKHRoaXMpLmh0bWwoKS5sZW5ndGg7XG4gICAgICAgICAgICBpZiAobGVuZ3RoID4gMTQpIHtcbiAgICAgICAgICAgICAgICB2YXIgbmFtZSA9ICQodGhpcykudGV4dCgpO1xuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKG5hbWUpO1xuICAgICAgICAgICAgICAgIHZhciB0cmltbWVkX25hbWUgPSBuYW1lLmNoYXJBdCgwKSArIFwiLiBcIiArIG5hbWUuc3Vic3RyKG5hbWUuaW5kZXhPZignICcpICsgMSk7XG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2codHJpbW1lZF9uYW1lKTtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnRleHQodHJpbW1lZF9uYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGFqYXhfdXJsID0gJCgnLmdsb2JhbCcpLmF0dHIoJ2RhdGEtYWpheC11cmwnKTtcbiAgICAgICAgICAgIHZhciBwb3N0X29mZnNldCA9IDA7XG4gICAgICAgICAgICB2YXIgaW5jTnVtYmVyID0gNjsgLy8gaWxvxZvEhyBwb3N0w7N3IGRvIHphxYJhZG93YW5pYVxuICAgICAgICBcbiAgICAgICAgICAgIHZhciBwcm9qZWN0cyA9IChmdW5jdGlvbihzZXRQcm9qZWN0cykge1xuICAgICAgICAgICAgICAgIHZhciBsb2FkZWQ7XG4gICAgICAgICAgICAgICAgdmFyIHRvdGFsO1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGluY0xvYWRlZDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2FkZWQgPSBsb2FkZWQgKyBpbmNOdW1iZXI7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGdldExvYWRlZDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbG9hZGVkO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBzZXRMb2FkZWQ6IGZ1bmN0aW9uKHNldFByb2plY3RzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2FkZWQgPSBzZXRQcm9qZWN0cztcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgc2V0VG90YWw6IGZ1bmN0aW9uKHNldFByb2plY3RzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b3RhbCA9IHNldFByb2plY3RzO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBnZXRUb3RhbDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdG90YWw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSkoKTtcbiAgICAgICAgICAgIHZhciBsb2FkaW5nQnV0dG9uID0gKGZ1bmN0aW9uKGJ1dHRvbil7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgc2hvd1NwaW5uZXI6IGZ1bmN0aW9uKGJ1dHRvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uLmh0bWwoJzxkaXYgY2xhc3M9XCJzcGlubmVyXCI+PC9kaXY+Jyk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHNob3dDYXB0aW9uOiBmdW5jdGlvbihidXR0b24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5odG1sKCdab2JhY3ogc3RhcnN6ZScpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBoaWRlOiBmdW5jdGlvbihidXR0b24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSkoKTtcbiAgICAgICAgXG4gICAgICAgICAgICAkKCcjbG9hZF9tb3JlX3Bvc3RzJykub24oJ2NsaWNrJywgbG9hZE1vcmUpO1xuICAgICAgICAgICAgJCgnI2xvYWRfbW9yZScpLm9uKCdjbGljaycsIGxvYWRQcm9qZWN0cyk7XG4gICAgICAgIFxuICAgICAgICAgICAgZnVuY3Rpb24gbG9hZE1vcmUoKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0NsaWNrZWQgbG9hZF9tb3JlJyk7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5odG1sKCc8ZGl2IGNsYXNzPVwic3Bpbm5lclwiPjwvZGl2PicpO1xuICAgICAgICAgICAgICAgIHBvc3Rfb2Zmc2V0ID0gcGFyc2VJbnQocG9zdF9vZmZzZXQpICsgNjtcbiAgICAgICAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgICAgICAgICB1cmw6IGFqYXhfdXJsLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogJ2xvYWRfcG9zdHMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zdF9vZmZzZXQ6IHBvc3Rfb2Zmc2V0LFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcjbG9hZF9tb3JlX3Bvc3RzJykuaHRtbCgnWm9iYWN6IHN0YXJzemUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJyNwb3N0cyAuY2FyZHNXcmFwcGVyJykuYXBwZW5kKGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5pbmZvKCdBamF4OiBPSycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYkxhenkucmV2YWxpZGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FyZEV4Y2VycHQoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgICAgIGZ1bmN0aW9uIGxvYWRQcm9qZWN0cygpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGhpc1BhcmVudCA9ICQodGhpcykucGFyZW50KCk7XG4gICAgICAgICAgICAgICAgLy8gdXN0YXdpYSBjYcWCa293aXTEhSBsaWN6YsSZIGRhbnljaCBwcm9qZWt0w7N3XG4gICAgICAgICAgICAgICAgcHJvamVjdHMuc2V0VG90YWwodGhpc1BhcmVudC5hdHRyKCdkYXRhLXRvdGFsJykpO1xuICAgICAgICAgICAgICAgIC8vIGplxZtsaSBqZXN6Y3plIG5pZSBwb2JpZXJhbm8gYWpheGVtIHByb2pla3TDs3csIHRvIHVzdGF3aWEgd2FydG/Fm8SHXG4gICAgICAgICAgICAgICAgLy8gcsOzd27EhSBqdcW8IHd5xZt3aWV0bG9ueWNoXG4gICAgICAgICAgICAgICAgaWYgKCFwcm9qZWN0cy5nZXRMb2FkZWQoKSkge1xuICAgICAgICAgICAgICAgICAgICBwcm9qZWN0cy5zZXRMb2FkZWQodGhpc1BhcmVudC5maW5kKCcuY2FyZCcpLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdBbHJlYWR5OicsIHByb2plY3RzLmdldExvYWRlZCgpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHByb2plY3RzX3N0YXR1cyA9IHRoaXNQYXJlbnQuYXR0cignZGF0YS1wcm9qZWN0cy1zdGF0dXMnKTtcbiAgICAgICAgICAgICAgICBwb3N0X29mZnNldCA9IHBhcnNlSW50KHBvc3Rfb2Zmc2V0KSArIGluY051bWJlcjtcbiAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKHByb2plY3RzLmdldFRvdGFsKCkgPiBwcm9qZWN0cy5nZXRMb2FkZWQoKSkge1xuICAgICAgICAgICAgICAgICAgICBsb2FkaW5nQnV0dG9uLnNob3dTcGlubmVyKCQoJyNsb2FkX21vcmUnKSk7XG4gICAgICAgICAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgICAgICAgICB1cmw6IGFqYXhfdXJsLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogJ2xvYWRfcHJvamVjdHMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc3Rfb2Zmc2V0OiBwb3N0X29mZnNldCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9qZWN0c19zdGF0dXM6IHByb2plY3RzX3N0YXR1cyxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1BhcmVudC5jaGlsZHJlbignLmNhcmRzV3JhcHBlcicpLmFwcGVuZChkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiTGF6eS5yZXZhbGlkYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FyZEV4Y2VycHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2FkaW5nQnV0dG9uLnNob3dDYXB0aW9uKCQoJyNsb2FkX21vcmUnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvamVjdHMuaW5jTG9hZGVkKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5pbmZvKCdBamF4OiBMb2FkZWQgbW9yZSAlcyBwcm9qZWN0czogJWQvJWQnLCBwcm9qZWN0c19zdGF0dXMsIHByb2plY3RzLmdldExvYWRlZCgpLCBwcm9qZWN0cy5nZXRUb3RhbCgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvamVjdHMuZ2V0VG90YWwoKSA8PSBwcm9qZWN0cy5nZXRMb2FkZWQoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2FkaW5nQnV0dG9uLmhpZGUoJCgnI2xvYWRfbW9yZScpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKCk7XG5cbiAgICAgICAgZnVuY3Rpb24gaW5pdFRvcGJhcigpIHtcbiAgICAgICAgICAgICQoJy50b3BiYXJXcmFwcGVyJykuc2Nyb2xsdXBiYXIoe1xuICAgICAgICAgICAgICAgIGVudGVyVmlld3BvcnQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAkKCcudG9wYmFyV3JhcHBlcicpLmFkZENsYXNzKCd0b3BiYXJXcmFwcGVyLS12aXNpYmxlJyk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBmdWxseUVudGVyVmlld3BvcnQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAkKCcjbGFzdC1ldmVudCcpLnRleHQoJ2Z1bGx5RW50ZXJWaWV3cG9ydCcpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZXhpdFZpZXdwb3J0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgJCgnI2xhc3QtZXZlbnQnKS50ZXh0KCdleGl0Vmlld3BvcnQnKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHBhcnRpYWxseUV4aXRWaWV3cG9ydDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICQoJyNsYXN0LWV2ZW50JykudGV4dCgncGFydGlhbGx5RXhpdFZpZXdwb3J0Jyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaW5pdFRvcGJhcigpO1xuICAgICAgICBcbiAgICAgICAgaWYgKCQod2luZG93KS53aWR0aCgpIDwgNzUwKSB7XG4gICAgICAgICAgICAkLnNjcm9sbHVwYmFyLmRlc3Ryb3koJy50b3BiYXJXcmFwcGVyJyk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgICQod2luZG93KS5zY3JvbGwoZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgIC8vIGRpZFNjcm9sbCA9IHRydWU7XG4gICAgICAgICAgICB2YXIgc3QgPSAkKHRoaXMpLnNjcm9sbFRvcCgpO1xuICAgICAgICAgICAgLy8gR2R5IGplc3RlxZtteSBuYSBzYW1laiBnw7NyemUsIHRvIHBva2F6eWplbXkgY2HFgmUgbG9nb1xuICAgICAgICAgICAgaWYgKHN0ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgJCgnLnRvcGJhcldyYXBwZXInKS5yZW1vdmVDbGFzcygndG9wYmFyV3JhcHBlci0tdmlzaWJsZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgdGFicyA9IChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBjdXJyZW50VGFiO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBpbml0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gcG9iaWVyYW15IGhyZWZcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFRhYiA9ICQoJy50YWJzTWVudV9faXRlbS0tY3VycmVudCAubGluay0tdGFiJykuYXR0cignaHJlZicpO1xuICAgICAgICAgICAgICAgICAgICAvLyBocmVmIGplc3QgamVkbm9jemXFm25pZSBpZCBvZHBvd2llZG5pZWdvIHRhYnUsIGt0w7NyeSB3ecWbd2lldGxhbXlcbiAgICAgICAgICAgICAgICAgICAgJChjdXJyZW50VGFiKS5hZGRDbGFzcygndGFiX19jb250ZW50LS12aXNpYmxlJyk7XG4gICAgICAgICAgICAgICAgICAgIC8vIMWCYWR1amVteSBvYnJhemtpXG4gICAgICAgICAgICAgICAgICAgIGJMYXp5LmxvYWQoJChcIi5ibGF6eVwiLCBjdXJyZW50VGFiKSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuaW5mbygnVGFicyBpbml0aWF0ZWQ6JywgY3VycmVudFRhYik7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICByZXNldDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFogdHltICN0YWJzUmVzZXQsIHRvIHRha2kgaGFjay4gV3lrb3J6eXN0eXdhbnkgZGxhdGVnbywgxbxlXG4gICAgICAgICAgICAgICAgICAgIC8vIHBvIGtsaWtuacSZY2l1IGNob3dhasSFIHNpxJkgd3N6eXN0a2llIHRhYnksIG9wcsOzY3ogdGVqIHogb2Rwb3dpZWRuaW0gaWRcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFRhYiA9ICQoJyN0YWJzUmVzZXQgLmxpbmstLXRhYicpLmF0dHIoJ2hyZWYnKTtcbiAgICAgICAgICAgICAgICAgICAgJChjdXJyZW50VGFiKS5yZW1vdmVDbGFzcyhcInRhYl9fY29udGVudC0taGlkZGVuXCIpLmFkZENsYXNzKFwidGFiX19jb250ZW50LS12aXNpYmxlXCIpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmluZm8oJ1RhYnMgaW5pdGlhdGVkOicsIGN1cnJlbnRUYWIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pKCk7XG4gICAgICAgIHRhYnMuaW5pdCgpO1xuICAgICAgICBcbiAgICAgICAgJChcIi5nbG9iYWxcIikub24oJ2NsaWNrJywgJy5saW5rLS10YWInLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgLy8gd3nFgsSFY3phIGRvbXnFm2xuZSBwcnplasWbY2llIG5hIGFkcmVzIGxpbmt1XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgLy8gZG9kYWplIGtsYXPEmSBkbyA8bGk+XG4gICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgpLmFkZENsYXNzKFwidGFic01lbnVfX2l0ZW0tLWN1cnJlbnRcIik7XG4gICAgICAgICAgICAvLyB1c3V3YSBrbGFzxJkgeiA8bGk+XG4gICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoXCJ0YWJzTWVudV9faXRlbS0tY3VycmVudFwiKTtcbiAgICAgICAgICAgIC8vIHBvYmllcmFteSBpZCB6IGhyZWZ1XG4gICAgICAgICAgICB2YXIgdGFiID0gJCh0aGlzKS5hdHRyKFwiaHJlZlwiKTtcbiAgICAgICAgICAgIC8vIGplxZtsaSBibG9rIG5pZSBtYSB0YWtpZWdvIGlkLCB0byBjaG93YW15IGdvXG4gICAgICAgICAgICAkKFwiLnRhYl9fY29udGVudFwiKS5ub3QodGFiKS5hZGRDbGFzcyhcInRhYl9fY29udGVudC0taGlkZGVuXCIpLnJlbW92ZUNsYXNzKFwidGFiX19jb250ZW50LS12aXNpYmxlXCIpO1xuICAgICAgICAgICAgLy8gYSBqZcWbbGkgbWEsIHRvIHBva2F6dWplbXlcbiAgICAgICAgICAgICQodGFiKS5yZW1vdmVDbGFzcyhcInRhYl9fY29udGVudC0taGlkZGVuXCIpLmFkZENsYXNzKFwidGFiX19jb250ZW50LS12aXNpYmxlXCIpO1xuICAgICAgICAgICAgLy8gxYJhZHVqZW15IG9icmF6a2kgdyBibG9rdSB6IG9kcG93aWVkbmltIGlkXG4gICAgICAgICAgICBiTGF6eS5sb2FkKCQoXCIuYmxhenlcIiwgdGFiKSwgdHJ1ZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIGh0dHA6Ly9jb2RlcGVuLmlvL2pha3VidHVyc2t5L3Blbi92RXdab3BcbiAgICAgICAgXHQkLmZuLmpRdWVyeVNpbXBsZUNvdW50ZXIgPSBmdW5jdGlvbiggb3B0aW9ucyApIHtcbiAgICAgICAgXHQgICAgdmFyIHNldHRpbmdzID0gJC5leHRlbmQoe1xuICAgICAgICBcdCAgICAgICAgc3RhcnQ6ICAwLFxuICAgICAgICBcdCAgICAgICAgZW5kOiAgICAxMDAsXG4gICAgICAgIFx0ICAgICAgICBlYXNpbmc6ICdzd2luZycsXG4gICAgICAgIFx0ICAgICAgICBkdXJhdGlvbjogNDAwLFxuICAgICAgICBcdCAgICAgICAgY29tcGxldGU6ICcnXG4gICAgICAgIFx0ICAgIH0sIG9wdGlvbnMgKTtcbiAgICAgICAgXG4gICAgICAgIFx0ICAgIHZhciB0aGlzRWxlbWVudCA9ICQodGhpcyk7XG4gICAgICAgIFxuICAgICAgICBcdCAgICAkKHtjb3VudDogc2V0dGluZ3Muc3RhcnR9KS5hbmltYXRlKHtjb3VudDogc2V0dGluZ3MuZW5kfSwge1xuICAgICAgICBcdFx0XHRkdXJhdGlvbjogc2V0dGluZ3MuZHVyYXRpb24sXG4gICAgICAgIFx0XHRcdGVhc2luZzogc2V0dGluZ3MuZWFzaW5nLFxuICAgICAgICBcdFx0XHRzdGVwOiBmdW5jdGlvbigpIHtcbiAgICAgICAgXHRcdFx0XHR2YXIgbWF0aENvdW50ID0gTWF0aC5jZWlsKHRoaXMuY291bnQpO1xuICAgICAgICBcdFx0XHRcdHRoaXNFbGVtZW50LmNoaWxkcmVuKCcuY291bnRlcnNfX2NvdW50JykudGV4dChtYXRoQ291bnQpO1xuICAgICAgICBcdFx0XHR9LFxuICAgICAgICBcdFx0XHRjb21wbGV0ZTogc2V0dGluZ3MuY29tcGxldGVcbiAgICAgICAgXHRcdH0pO1xuICAgICAgICBcdH07XG4gICAgICAgIFxuICAgICAgICAvLyB2YXIgZmluaXNoZWROdW1iZXIgPSAkKCcjZmluaXNoZWQnKS5kYXRhKCdmaW5pc2hlZCcpO1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhmaW5pc2hlZE51bWJlcik7XG4gICAgICAgIC8vICQoJyNmaW5pc2hlZCcpLmpRdWVyeVNpbXBsZUNvdW50ZXIoe2VuZDogZmluaXNoZWROdW1iZXIsIGR1cmF0aW9uOiAzMDAwfSk7XG4gICAgICAgIC8vICQoJyNudW1iZXIyJykualF1ZXJ5U2ltcGxlQ291bnRlcih7ZW5kOiA1NSxkdXJhdGlvbjogMzAwMH0pO1xuICAgICAgICAvLyAkKCcjbnVtYmVyMycpLmpRdWVyeVNpbXBsZUNvdW50ZXIoe2VuZDogMzU5LGR1cmF0aW9uOiAyMDAwfSk7XG4gICAgICAgIC8vICQoJyNudW1iZXI0JykualF1ZXJ5U2ltcGxlQ291bnRlcih7ZW5kOiAyNDYsZHVyYXRpb246IDI1MDB9KTtcblxuICAgICAgICAoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAvLyBodHRwczovL21hcmNpbi5sYWJlci5wbC8yMDE0LzA5L29kbWlhbmEtbGljemVibmlrb3ctdy1qYXZhc2NyaXB0L1xuICAgICAgICAgICAgdmFyIG51bSA9IGZ1bmN0aW9uKHZhbHVlLCBudW1lcmFscywgd292YWx1ZSkge1xuICAgICAgICAgICAgICAgIHZhciB0MCA9IHZhbHVlICUgMTAsXG4gICAgICAgICAgICAgICAgICAgIHQxID0gdmFsdWUgJSAxMDAsXG4gICAgICAgICAgICAgICAgICAgIHZvID0gW107XG4gICAgICAgICAgICAgICAgaWYgKHdvdmFsdWUgIT09IHRydWUpXG4gICAgICAgICAgICAgICAgICAgIHZvLnB1c2godmFsdWUpO1xuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gMSAmJiBudW1lcmFsc1sxXSlcbiAgICAgICAgICAgICAgICAgICAgdm8ucHVzaChudW1lcmFsc1sxXSk7XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoKHZhbHVlID09PSAwIHx8ICh0MCA+PSAwICYmIHQwIDw9IDEpIHx8ICh0MCA+PSA1ICYmIHQwIDw9IDkpIHx8ICh0MSA+IDEwICYmIHQxIDwgMjApKSAmJiBudW1lcmFsc1swXSlcbiAgICAgICAgICAgICAgICAgICAgdm8ucHVzaChudW1lcmFsc1swXSk7XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoKCh0MSA8IDEwIHx8IHQxID4gMjApICYmIHQwID49IDIgJiYgdDAgPD0gNCkgJiYgbnVtZXJhbHNbMl0pXG4gICAgICAgICAgICAgICAgICAgIHZvLnB1c2gobnVtZXJhbHNbMl0pO1xuICAgICAgICAgICAgICAgIHJldHVybiB2b1sxXTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICAgICAgJCgnLmNvdW50ZXInKS5lYWNoKGZ1bmN0aW9uKGluZGV4KSB7XG4gICAgICAgICAgICAgICAgdmFyIHN0YXR1cyA9ICQodGhpcykuYXR0cignaWQnKTtcbiAgICAgICAgICAgICAgICB2YXIgY291bnQgPSBwYXJzZUludCgkKHRoaXMpLmNoaWxkcmVuKCdhJykuaHRtbCgpKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhjb3VudCwgc3RhdHVzKTtcbiAgICAgICAgICAgICAgICBpZiAoc3RhdHVzID09PSAnZmluaXNoZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnLmNvdW50ZXJfX2xhYmVsJykuaHRtbChudW0oY291bnQsIFtcIlByb2pla3TDs3cgdWtvxYRjem9ueWNoXCIsIFwiUHJvamVrdCB1a2/FhGN6b255XCIsIFwiUHJvamVrdHkgdWtvxYRjem9uZVwiXSkpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnLmNvdW50ZXJfX2xhYmVsJykuaHRtbChudW0oY291bnQsIFtcIlByb2pla3TDs3cgcmVhbGl6b3dhbnljaFwiLCBcIlByb2pla3QgcmVhbGl6b3dhbnlcIiwgXCJQcm9qZWt0eSByZWFsaXpvd2FuZVwiXSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgJCgnLmNvdW50ZXJzX19jb3VudGVyJykuZWFjaChmdW5jdGlvbihpbmRleCkge1xuICAgICAgICAgICAgICAgIHZhciBzdGF0dXMgPSAkKHRoaXMpLmF0dHIoJ2lkJyk7XG4gICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gcGFyc2VJbnQoJCh0aGlzKS5jaGlsZHJlbignLmNvdW50ZXJzX19jb3VudCcpLmRhdGEoc3RhdHVzKSk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coY291bnQsIHN0YXR1cyk7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXR1cyA9PT0gJ2ZpbmlzaGVkJykge1xuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJy5jb3VudGVyc19fbGFiZWwnKS5odG1sKG51bShjb3VudCwgW1wiUHJvamVrdMOzdyB1a2/FhGN6b255Y2hcIiwgXCJQcm9qZWt0IHVrb8WEY3pvbnlcIiwgXCJQcm9qZWt0eSB1a2/FhGN6b25lXCJdKSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzdGF0dXMgPT09ICdpbi1wcm9ncmVzcycpe1xuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJy5jb3VudGVyc19fbGFiZWwnKS5odG1sKG51bShjb3VudCwgW1wiUHJvamVrdMOzdyByZWFsaXpvd2FueWNoXCIsIFwiUHJvamVrdCByZWFsaXpvd2FueVwiLCBcIlByb2pla3R5IHJlYWxpem93YW5lXCJdKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICQoJyMnK3N0YXR1cykualF1ZXJ5U2ltcGxlQ291bnRlcih7ZW5kOiBjb3VudCwgZHVyYXRpb246IDI1MDB9KTtcbiAgICAgICAgXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIH0pKCk7XG5cbiAgICAgICAgKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgLy8gYW5pbWFjamEgemUgem1pZW5pYWrEhWN5bSBzacSZIGdyYWRpZW50ZW0gb2JjacSFxbxhIENQVSxcbiAgICAgICAgICAgIC8vIHdpxJljIHfFgsSFY3phbSBqxIUgdHlsa28sIGdkeSB1xbx5dGtvd25payBkb3Nyb2x1amUgZG8ga2/FhGNhIHN0cm9ueVxuICAgICAgICAgICAgJCh3aW5kb3cpLnNjcm9sbChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICBpZiAoJCh3aW5kb3cpLnNjcm9sbFRvcCgpID49ICQoZG9jdW1lbnQpLmhlaWdodCgpIC0gJCh3aW5kb3cpLmhlaWdodCgpIC0gNTAwKSB7XG4gICAgICAgICAgICAgICAgICAkKCcuZm9vdGVyLXdyYXBwZXInKS5hZGRDbGFzcygnZm9vdGVyLXdyYXBwZXItLWFuaW1hdGUnKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICQoJy5mb290ZXItd3JhcHBlcicpLnJlbW92ZUNsYXNzKCdmb290ZXItd3JhcHBlci0tYW5pbWF0ZScpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSkoKTtcblxuICAgICAgICAoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkKFwiLmhlcm9fX21pZGRsZVRpdGxlXCIpLm9uZSgnYW5pbWF0aW9uZW5kIHdlYmtpdEFuaW1hdGlvbkVuZCBvQW5pbWF0aW9uRW5kIG9hbmltYXRpb25lbmQgTVNBbmltYXRpb25FbmQnLFxuICAgICAgICAgICAgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnaGVyb19fbWlkZGxlVGl0bGUtLWFuaW1hdGlvbicpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAkKFwiLmhlcm9fX2xlZnRUaXRsZVwiKS5vbmUoJ2FuaW1hdGlvbmVuZCB3ZWJraXRBbmltYXRpb25FbmQgb0FuaW1hdGlvbkVuZCBvYW5pbWF0aW9uZW5kIE1TQW5pbWF0aW9uRW5kJyxcbiAgICAgICAgICAgIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2hlcm9fX2xlZnRUaXRsZS0tYW5pbWF0aW9uJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICQoXCIuaGVyb19fcmlnaHRUaXRsZVwiKS5vbmUoJ2FuaW1hdGlvbmVuZCB3ZWJraXRBbmltYXRpb25FbmQgb0FuaW1hdGlvbkVuZCBvYW5pbWF0aW9uZW5kIE1TQW5pbWF0aW9uRW5kJyxcbiAgICAgICAgICAgIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2hlcm9fX3JpZ2h0VGl0bGUtLWFuaW1hdGlvbicpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgICAgICQoJy5oZXJvX19sZWZ0JykuaG92ZXIoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgJCgnLmhlcm9fX21pZGRsZScpLmFkZENsYXNzKCdoZXJvX19taWRkbGUtLWNvbGxhcHNlZEwnKTtcbiAgICAgICAgICAgICAgICAkKCcuaGVyb19fbWlkZGxlVGl0bGUnKS5hZGRDbGFzcygnaGVyb19fbWlkZGxlVGl0bGUtLW9wYWNpdHk4MCcpO1xuICAgICAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2hlcm9fX2xlZnQtLW12UicpO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgJCgnLmhlcm9fX21pZGRsZScpLnJlbW92ZUNsYXNzKCdoZXJvX19taWRkbGUtLWNvbGxhcHNlZEwnKTtcbiAgICAgICAgICAgICAgICAkKCcuaGVyb19fbWlkZGxlVGl0bGUnKS5yZW1vdmVDbGFzcygnaGVyb19fbWlkZGxlVGl0bGUtLW9wYWNpdHk4MCcpO1xuICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2hlcm9fX2xlZnQtLW12UicpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAkKCcuaGVyb19fcmlnaHQnKS5ob3ZlcihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAkKCcuaGVyb19fbWlkZGxlJykuYWRkQ2xhc3MoJ2hlcm9fX21pZGRsZS0tY29sbGFwc2VkUicpO1xuICAgICAgICAgICAgICAgICQoJy5oZXJvX19taWRkbGVUaXRsZScpLmFkZENsYXNzKCdoZXJvX19taWRkbGVUaXRsZS0tb3BhY2l0eTgwJyk7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnaGVyb19fcmlnaHQtLW12TCcpO1xuICAgICAgICBcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICQoJy5oZXJvX19taWRkbGUnKS5yZW1vdmVDbGFzcygnaGVyb19fbWlkZGxlLS1jb2xsYXBzZWRSJyk7XG4gICAgICAgICAgICAgICAgJCgnLmhlcm9fX21pZGRsZVRpdGxlJykucmVtb3ZlQ2xhc3MoJ2hlcm9fX21pZGRsZVRpdGxlLS1vcGFjaXR5ODAnKTtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdoZXJvX19yaWdodC0tbXZMJyk7XG4gICAgICAgIFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pKCk7XG5cbiAgICAgICAgLy8gVGFrIHcgb2fDs2xlLCB0byBva25vIG1vZGFsbmUgbmFsZcW8eSBvZGR6aWVsacSHIG9kXG4gICAgICAgIC8vIFNQT05TT1LDk1cgaSBXU1DDk8WBUFJBQ1ksIHpyb2JpxIcgbmllemFsZcW8bnltIGVsZW1lbnRlbVxuICAgICAgICBcbiAgICAgICAgKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJCgnLmJyYW5kJykuZWFjaChmdW5jdGlvbihpbmRleCkge1xuICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmRhdGEoJ2JyYW5kLWRlc2MnKS5sZW5ndGggPCAxKSB7XG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnLmJyYW5kX19tb3JlJykucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAgICAgJCgnLmJyYW5kX19tb3JlJykuYmluZChcImNsaWNrXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgdmFyIGJyYW5kID0gJCh0aGlzKS5wYXJlbnRzKCcuYnJhbmQnKTtcbiAgICAgICAgICAgICAgICB2YXIgYnJhbmROYW1lID0gYnJhbmQuZGF0YSgnYnJhbmQtbmFtZScpO1xuICAgICAgICAgICAgICAgIHZhciBicmFuZExpbmsgPSBicmFuZC5kYXRhKCdicmFuZC1saW5rJyk7XG4gICAgICAgICAgICAgICAgdmFyIGJyYW5kRGVzYyA9IGJyYW5kLmRhdGEoJ2JyYW5kLWRlc2MnKTtcbiAgICAgICAgICAgICAgICB2YXIgYnJhbmRMb2dvID0gYnJhbmQuZmluZCgnLmJyYW5kX19sb2dvJykuYXR0cignc3JjJyk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYnJhbmQsIGJyYW5kTmFtZSwgYnJhbmRMaW5rLCBicmFuZERlc2MsIGJyYW5kTG9nbyk7XG4gICAgICAgIFxuICAgICAgICAgICAgICAgICQoJy5tb2RhbF9fdGl0bGUnKS5odG1sKGJyYW5kTmFtZSk7XG4gICAgICAgICAgICAgICAgJCgnLm1vZGFsX19jb250ZW50IGEnKS5odG1sKGJyYW5kTGluaykuYXR0cignaHJlZicsIGJyYW5kTGluayk7XG4gICAgICAgICAgICAgICAgJCgnLm1vZGFsX19jb250ZW50IHAnKS5odG1sKGJyYW5kRGVzYyk7XG4gICAgICAgICAgICAgICAgJCgnLm1vZGFsX19jb250ZW50IHAnKS5odG1sKGJyYW5kRGVzYyk7XG4gICAgICAgICAgICAgICAgJCgnLm1vZGFsX19pbWFnZScpLmF0dHIoJ3NyYycsIGJyYW5kTG9nbyk7XG4gICAgICAgIFxuICAgICAgICAgICAgICAgICQoXCJodG1sXCIpLmFkZENsYXNzKFwiZG9Ob3RTY3JvbGxcIik7XG4gICAgICAgICAgICAgICAgJCgnLm1vZGFsJykuYWRkQ2xhc3MoJ3Zpc2libGUnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgICAgIC8vT24gY2xpY2tpbmcgdGhlIG1vZGFsIGJhY2tncm91bmRcbiAgICAgICAgICAgICQoJ1tkYXRhLW1vZGFsLWNsb3NlXScpLmJpbmQoXCJjbGlja1wiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgJCgnLm1vZGFsJykucmVtb3ZlQ2xhc3MoJ3Zpc2libGUnKTtcbiAgICAgICAgICAgICAgICAkKFwiaHRtbFwiKS5yZW1vdmVDbGFzcyhcImRvTm90U2Nyb2xsXCIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICB9KSgpO1xuXG4gICAgICAgIChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIFNsaWRlciA9ICQoJyNzbGlkZXInKS5Td2lwZSh7XG4gICAgICAgICAgICAgIGF1dG86IDAsXG4gICAgICAgICAgICAgIGNvbnRpbnVvdXM6IHRydWUsXG4gICAgICAgICAgICB9KS5kYXRhKCdTd2lwZScpO1xuICAgICAgICAgICAgaWYgKFNsaWRlcikge1xuICAgICAgICAgICAgICAkKCcuc3dpcGVfX25leHQnKS5vbignY2xpY2snLCBTbGlkZXIubmV4dCk7XG4gICAgICAgICAgICAgICQoJy5zd2lwZV9fcHJldicpLm9uKCdjbGljaycsIFNsaWRlci5wcmV2KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIH0pKCk7XG5cbiAgICB9KTtcblxuICAgIC8vIFByZXplcyB6YXdzemUgbmEgcGllcndzenltIG1pZWpzY3UgLy9cbiAgICAkKCcubWVtYmVyY2FyZCNwcmVzaWRlbnQnKS5pbnNlcnRCZWZvcmUoJyNjdXJyZW50X21lbWJlcnMgLmNhcmRzV3JhcHBlciBkaXY6ZXEoMCknKTtcblxuICAgIC8vIERvZGFqZSBkbyA8YT4ga2xhc8SZIFwibGlua1wiXG4gICAgJCgnLnByb2plY3RfX2NvbnRlbnQgYScpLmFkZENsYXNzKCdsaW5rJyk7XG5cbn0pOyJdLCJmaWxlIjoibWFpbi5taW4uanMiLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
