// main.js //
// Wszystko wrzucamy tu

jQuery(function($) {

  $(document).ready(function bLazy_f() {
    var bLazy = new Blazy({
      offset: 20,
      selector: '.blazy',
      loadInvisible: false,
      success: function() {
        updateCounter();
      },
      error: function(ele, msg) {
        if (msg === 'missing') {
          // Data-src is missing
          console.error("bLazy: data-src is missing");
        } else if (msg === 'invalid') {
          // Data-src is invalid
          console.error("bLazy: data-src is invalid");
  
        }
      }
    });
    // not needed, only here to illustrate amount of loaded images
    var imageLoaded = 0;
    function updateCounter() {
      imageLoaded++;
      console.info("bLazy: Images loaded: %d", imageLoaded);
    }
  
    tabs(bLazy);
  });

  // Dropdown download button //
  // http://codepen.io/georgehastings/pen/vptdb
  $(".dropdown").on("click", function(event) {
    $(this).toggleClass("flip");
    event.stopPropagation();
    console.info("Dropdown-download opened");
  });
  $(document).on("click", function(event) {
    $(".dropdown").removeClass("flip");
  });

  /**
   * Dropy
   * http://codepen.io/Tombek/pen/OPvpLe
   */
  var dropy = {
    $dropys: null,
    openClass: 'open',
    selectClass: 'selected',
    init: function(){
      var self = this;
  
      self.$dropys = $('.dropy');
      self.eventHandler();
    },
    eventHandler: function(){
      var self = this;
  
      // Opening a dropy
      self.$dropys.find('.dropy__title').click(function(){
        self.$dropys.removeClass(self.openClass);
        $(this).parents('.dropy').addClass(self.openClass);
      });
  
      // Click on a dropy list
      self.$dropys.find('.dropy__content ul li a').click(function(){
        var $that = $(this);
        var $dropy = $that.parents('.dropy');
        var $input = $dropy.find('input');
        var $title = $(this).parents('.dropy').find('.dropy__title span');
  
        // Remove selected class
        $dropy.find('.dropy__content a').each(function(){
          $(this).removeClass(self.selectClass);
        });
  
        // Update selected value
        $title.html($that.html());
        $input.val($that.attr('data-value')).trigger('change');
  
        // If back to default, remove selected class else addclass on right element
        if($that.hasClass('dropy__header')){
          $title.removeClass(self.selectClass);
          $title.html($title.attr('data-title'));
        }
        else{
          $title.addClass(self.selectClass);
          $that.addClass(self.selectClass);
        }
  
        // Close dropdown
        $dropy.removeClass(self.openClass);
      });
  
      // Close all dropdown onclick on another element
      $(document).bind('click', function(e){
          if (! $(e.target).parents().hasClass('dropy')){ self.$dropys.removeClass(self.openClass); }
      });
    }
  };
  
  $(function(){
    dropy.init();
  });

    function acts() {
      var te;
      var min = $('.post-list-item-content h2').height();
      $('.post-list-item .post-list-item-content h2').each(function() {
        if ($(this).height() < min)
          min = $(this).height();
      });
  
      $('.post-list-item-content h2').each(function() {
        if ($(this).height() == min) {
          te = $(this).parent().parent().children('.excerpt');
          $(te).text(function(index, currentText) {
            if (currentText.substr(currentText.length - 3) != '&hellip;')
              return currentText.substr(0, 150) + '&hellip;';
          });
        } else if (($(this).height() < (min - 1) * 3) && ($(this).height() > min)) {
          te = $(this).parent().parent().children('.excerpt');
          $(te).text(function(index, currentText) {
            return currentText.substr(0, 80) + '&hellip;';
          });
        } else {
          te = $(this).parent().parent().children('.excerpt');
          $(this).text(function(index, currentText) {
            if ((currentText.substr(currentText.length - 3) != '&hellip;') && (currentText.length > 120))
              return currentText.substr(0, 120) + '&hellip;';
          });
          te.css("display", "none");
        }
      });
    }
    acts();
    $(window).resize(acts);
  
  
  $(".card .excerpt").text(function(index, currentText) {
    return currentText.substr(0, 140) + '&hellip;';
  });

  // Pakuje mniejsze obrazki bez podpisu w <figure> //
  // Jeśli obrazek ma tytuł, tym się zajmuje php funkcja w project-functions.php
  $('.project-content p').each(function(index) {
    var some_img = $(this).find('img');
    var width = some_img.width();
    if (width < 980) {
      some_img.wrap("<figure></figure>");
    }
  });

  //Skraca imiona, by nie wychodziły za bloki
  $('.co-author h3 a').each(function(index) {
    var length = $(this).html().length;
    if (length > 13) {
      var name = $(this).text();
      // console.log(name);
      var trimmed_name = name.charAt(0) + ". " + name.substr(name.indexOf(' ') + 1);
      // console.log(trimmed_name);
      $(this).text(trimmed_name);
    }
  });

  // Notyfikacje, powiadomienia //
  $(".note-close").click(function() {
    $(this).parent()
      .animate({
        opacity: 0
      }, 250, function() {
        $(this)
          .animate({
            marginBottom: 0
          }, 250)
          .children()
          .animate({
            padding: 0
          }, 250)
          .wrapInner("<div />")
          .children()
          .slideUp(250, function() {
            $(this).closest(".note").remove();
          });
      });
  });

  // Animacje dla banera rekrutacji //
  $('label.button').on('click', function() {
    $('.fb').addClass('animated fadeInUp');
    $('.date .icon-container').addClass('animated slideInLeft');
    $('.date span').addClass('animated slideInLeft');
    $('.location .icon-container').addClass('animated slideInRight');
    $('.location span').addClass('animated slideInRight');
  
  });
  $('#close_banner').on('click', function() {
    $('.fb').removeClass('animated fadeInUp');
    $('.date .icon-container').removeClass('animated slideInLeft');
    $('.date span').removeClass('animated slideInLeft');
    $('.location .icon-container').removeClass('animated slideInRight');
    $('.location span').removeClass('animated slideInRight');
  });
  
  // http://stackoverflow.com/questions/24070627/create-dropdown-banner-when-user-first-visits-website
  // Pozwalają otwierać baner tylko przy pierwszej wizycie
  
  // cookie-js

  
    $(function() {
      // Touch ripple effect on buttons
      $('.button:not(.button.disabled)').on('click',
  
        function(e) {
  
          /*!
          SVG version for ripple effect via Jonathan Cutrell (gently modified)
          http://webdesign.tutsplus.com/tutorials/recreating-the-touch-ripple-effect-as-seen-on-google-design--cms-21655
          */
  
          var x = e.pageX;
          var y = e.pageY;
          var clickY = y - $(this).offset().top;
          var clickX = x - $(this).offset().left;
          var box = this;
  
          var setX = parseInt(clickX);
          var setY = parseInt(clickY);
          var ripple = '<svg class="ink"><circle cx="' + setX + '" cy="' + setY + '" r="' + 0 + '"></circle></svg>';
  
          $(this).find('.ink').remove();
          $(this).append(ripple);
  
          var c = $(box).find('circle');
          c.animate({
            'r': $(box).outerWidth()
          }, {
            duration: 333,
            step: function(val) {
              c.attr('r', val);
            },
            complete: function() {
              c.fadeOut('fast');
            }
          });
  
          return true;
  
        });
  
    });

  // Pobieranie nicków z url i wyświetlanie ich koło ikon społecznościowych
  // oraz wykorzystanie username'u githuba do wyświetlenia ostatnie aktywności
  $('.userinfo a').each(function(index) {
    var profile = $(this).attr('href');
    var github_profile = profile.substr(19);
    if (profile.indexOf('github') > -1) {
      $('a[data-github]').append(github_profile);
      Github.onlyuserActivity({
        username: github_profile,
        selector: ".github",
        limit: 10
      });
    }
    if (profile.indexOf('twitter') > -1) {
      $('a[data-twitter]').append(profile.substr(20));
    }
    if (profile.indexOf('facebook') > -1) {
      $('a[data-facebook]').append(profile.substr(25));
    }
  });
  
  // Github.onlyuserActivity({
  //   username: "synergia",
  //   selector: ".github_s",
  //   limit: 5
  // });

  function tabs(bLazy) {
    // set active radio to address bar
    $(document).on('click', '.tabs .tabs-nav label', function() {
      var tab_nr = $(this).attr('for');
      var hash = '#' + tab_nr;
      window.history.replaceState('', '', hash);
      if(tab_nr === 'tab-1'){
        bLazy.load($('.tab:nth-of-type(1) .blazy'), true);
      } else if (tab_nr === 'tab-2') {
        bLazy.load($('.tab:nth-of-type(2) .blazy'), true);
      }else if (tab_nr === 'tab-3') {
        bLazy.load($('.tab:nth-of-type(3) .blazy'), true);
      }
  
    });
    // select active radio based on hash
    $(document.location.hash).prop('checked', true);
  }

  /* ========================================================================
   * Bootstrap: transition.js v3.3.6
   * http://getbootstrap.com/javascript/#transitions
   * ========================================================================
   * Copyright 2011-2015 Twitter, Inc.
   * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
   * ======================================================================== */
  
  
  +function ($) {
    'use strict';
  
    // CSS TRANSITION SUPPORT (Shoutout: http://www.modernizr.com/)
    // ============================================================
  
    function transitionEnd() {
      var el = document.createElement('bootstrap')
  
      var transEndEventNames = {
        WebkitTransition : 'webkitTransitionEnd',
        MozTransition    : 'transitionend',
        OTransition      : 'oTransitionEnd otransitionend',
        transition       : 'transitionend'
      }
  
      for (var name in transEndEventNames) {
        if (el.style[name] !== undefined) {
          return { end: transEndEventNames[name] }
        }
      }
  
      return false // explicit for ie8 (  ._.)
    }
  
    // http://blog.alexmaccaw.com/css-transitions
    $.fn.emulateTransitionEnd = function (duration) {
      var called = false
      var $el = this
      $(this).one('bsTransitionEnd', function () { called = true })
      var callback = function () { if (!called) $($el).trigger($.support.transition.end) }
      setTimeout(callback, duration)
      return this
    }
  
    $(function () {
      $.support.transition = transitionEnd()
  
      if (!$.support.transition) return
  
      $.event.special.bsTransitionEnd = {
        bindType: $.support.transition.end,
        delegateType: $.support.transition.end,
        handle: function (e) {
          if ($(e.target).is(this)) return e.handleObj.handler.apply(this, arguments)
        }
      }
    })
  
  }(jQuery);

  $(document).ready(function(){
      $("#nav-mobile").html($("#nav-main").html());
      $("#nav-trigger .navicon-button").click(function(){
        console.info('Burger clicked');
          if ($("nav#nav-mobile ul").hasClass("expanded")) {
              $("nav#nav-mobile ul.expanded").removeClass("expanded").slideUp(250);
              $(this).removeClass("open");
          } else {
              $("nav#nav-mobile ul").addClass("expanded").slideDown(250);
              $(this).addClass("open");
          }
      });
  });

  $(document).ready(function() {
    Slider = $('#slider').Swipe({
      auto: 0,
      continuous: true,
    }).data('Swipe');
    if (Slider) {
      $('.next').on('click', Slider.next);
      $('.prev').on('click', Slider.prev);
    }
  });

  $(document).ready(function() {
  
      $('.blog-list-archive li ul').hide();
      $('.archive-list > li > h2').click(function(){
          $(this).parent().addClass('selected');
          $(this).parent().children('ul').slideDown(250);
          $(this).parent().siblings().children('ul').slideUp(250);
          $(this).parent().siblings().removeClass('selected');
      });
  });

  // Prezes zawsze na pierwszym miejscu //
  $('#management_board li#admin').insertBefore('#management_board li:eq(0)');
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJtYWluLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIG1haW4uanMgLy9cbi8vIFdzenlzdGtvIHdyenVjYW15IHR1XG5cbmpRdWVyeShmdW5jdGlvbigkKSB7XG5cbiAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gYkxhenlfZigpIHtcbiAgICB2YXIgYkxhenkgPSBuZXcgQmxhenkoe1xuICAgICAgb2Zmc2V0OiAyMCxcbiAgICAgIHNlbGVjdG9yOiAnLmJsYXp5JyxcbiAgICAgIGxvYWRJbnZpc2libGU6IGZhbHNlLFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24oKSB7XG4gICAgICAgIHVwZGF0ZUNvdW50ZXIoKTtcbiAgICAgIH0sXG4gICAgICBlcnJvcjogZnVuY3Rpb24oZWxlLCBtc2cpIHtcbiAgICAgICAgaWYgKG1zZyA9PT0gJ21pc3NpbmcnKSB7XG4gICAgICAgICAgLy8gRGF0YS1zcmMgaXMgbWlzc2luZ1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJiTGF6eTogZGF0YS1zcmMgaXMgbWlzc2luZ1wiKTtcbiAgICAgICAgfSBlbHNlIGlmIChtc2cgPT09ICdpbnZhbGlkJykge1xuICAgICAgICAgIC8vIERhdGEtc3JjIGlzIGludmFsaWRcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFwiYkxhenk6IGRhdGEtc3JjIGlzIGludmFsaWRcIik7XG4gIFxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgLy8gbm90IG5lZWRlZCwgb25seSBoZXJlIHRvIGlsbHVzdHJhdGUgYW1vdW50IG9mIGxvYWRlZCBpbWFnZXNcbiAgICB2YXIgaW1hZ2VMb2FkZWQgPSAwO1xuICAgIGZ1bmN0aW9uIHVwZGF0ZUNvdW50ZXIoKSB7XG4gICAgICBpbWFnZUxvYWRlZCsrO1xuICAgICAgY29uc29sZS5pbmZvKFwiYkxhenk6IEltYWdlcyBsb2FkZWQ6ICVkXCIsIGltYWdlTG9hZGVkKTtcbiAgICB9XG4gIFxuICAgIHRhYnMoYkxhenkpO1xuICB9KTtcblxuICAvLyBEcm9wZG93biBkb3dubG9hZCBidXR0b24gLy9cbiAgLy8gaHR0cDovL2NvZGVwZW4uaW8vZ2VvcmdlaGFzdGluZ3MvcGVuL3ZwdGRiXG4gICQoXCIuZHJvcGRvd25cIikub24oXCJjbGlja1wiLCBmdW5jdGlvbihldmVudCkge1xuICAgICQodGhpcykudG9nZ2xlQ2xhc3MoXCJmbGlwXCIpO1xuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIGNvbnNvbGUuaW5mbyhcIkRyb3Bkb3duLWRvd25sb2FkIG9wZW5lZFwiKTtcbiAgfSk7XG4gICQoZG9jdW1lbnQpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAkKFwiLmRyb3Bkb3duXCIpLnJlbW92ZUNsYXNzKFwiZmxpcFwiKTtcbiAgfSk7XG5cbiAgLyoqXG4gICAqIERyb3B5XG4gICAqIGh0dHA6Ly9jb2RlcGVuLmlvL1RvbWJlay9wZW4vT1B2cExlXG4gICAqL1xuICB2YXIgZHJvcHkgPSB7XG4gICAgJGRyb3B5czogbnVsbCxcbiAgICBvcGVuQ2xhc3M6ICdvcGVuJyxcbiAgICBzZWxlY3RDbGFzczogJ3NlbGVjdGVkJyxcbiAgICBpbml0OiBmdW5jdGlvbigpe1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICBcbiAgICAgIHNlbGYuJGRyb3B5cyA9ICQoJy5kcm9weScpO1xuICAgICAgc2VsZi5ldmVudEhhbmRsZXIoKTtcbiAgICB9LFxuICAgIGV2ZW50SGFuZGxlcjogZnVuY3Rpb24oKXtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgXG4gICAgICAvLyBPcGVuaW5nIGEgZHJvcHlcbiAgICAgIHNlbGYuJGRyb3B5cy5maW5kKCcuZHJvcHlfX3RpdGxlJykuY2xpY2soZnVuY3Rpb24oKXtcbiAgICAgICAgc2VsZi4kZHJvcHlzLnJlbW92ZUNsYXNzKHNlbGYub3BlbkNsYXNzKTtcbiAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCcuZHJvcHknKS5hZGRDbGFzcyhzZWxmLm9wZW5DbGFzcyk7XG4gICAgICB9KTtcbiAgXG4gICAgICAvLyBDbGljayBvbiBhIGRyb3B5IGxpc3RcbiAgICAgIHNlbGYuJGRyb3B5cy5maW5kKCcuZHJvcHlfX2NvbnRlbnQgdWwgbGkgYScpLmNsaWNrKGZ1bmN0aW9uKCl7XG4gICAgICAgIHZhciAkdGhhdCA9ICQodGhpcyk7XG4gICAgICAgIHZhciAkZHJvcHkgPSAkdGhhdC5wYXJlbnRzKCcuZHJvcHknKTtcbiAgICAgICAgdmFyICRpbnB1dCA9ICRkcm9weS5maW5kKCdpbnB1dCcpO1xuICAgICAgICB2YXIgJHRpdGxlID0gJCh0aGlzKS5wYXJlbnRzKCcuZHJvcHknKS5maW5kKCcuZHJvcHlfX3RpdGxlIHNwYW4nKTtcbiAgXG4gICAgICAgIC8vIFJlbW92ZSBzZWxlY3RlZCBjbGFzc1xuICAgICAgICAkZHJvcHkuZmluZCgnLmRyb3B5X19jb250ZW50IGEnKS5lYWNoKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcyhzZWxmLnNlbGVjdENsYXNzKTtcbiAgICAgICAgfSk7XG4gIFxuICAgICAgICAvLyBVcGRhdGUgc2VsZWN0ZWQgdmFsdWVcbiAgICAgICAgJHRpdGxlLmh0bWwoJHRoYXQuaHRtbCgpKTtcbiAgICAgICAgJGlucHV0LnZhbCgkdGhhdC5hdHRyKCdkYXRhLXZhbHVlJykpLnRyaWdnZXIoJ2NoYW5nZScpO1xuICBcbiAgICAgICAgLy8gSWYgYmFjayB0byBkZWZhdWx0LCByZW1vdmUgc2VsZWN0ZWQgY2xhc3MgZWxzZSBhZGRjbGFzcyBvbiByaWdodCBlbGVtZW50XG4gICAgICAgIGlmKCR0aGF0Lmhhc0NsYXNzKCdkcm9weV9faGVhZGVyJykpe1xuICAgICAgICAgICR0aXRsZS5yZW1vdmVDbGFzcyhzZWxmLnNlbGVjdENsYXNzKTtcbiAgICAgICAgICAkdGl0bGUuaHRtbCgkdGl0bGUuYXR0cignZGF0YS10aXRsZScpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNle1xuICAgICAgICAgICR0aXRsZS5hZGRDbGFzcyhzZWxmLnNlbGVjdENsYXNzKTtcbiAgICAgICAgICAkdGhhdC5hZGRDbGFzcyhzZWxmLnNlbGVjdENsYXNzKTtcbiAgICAgICAgfVxuICBcbiAgICAgICAgLy8gQ2xvc2UgZHJvcGRvd25cbiAgICAgICAgJGRyb3B5LnJlbW92ZUNsYXNzKHNlbGYub3BlbkNsYXNzKTtcbiAgICAgIH0pO1xuICBcbiAgICAgIC8vIENsb3NlIGFsbCBkcm9wZG93biBvbmNsaWNrIG9uIGFub3RoZXIgZWxlbWVudFxuICAgICAgJChkb2N1bWVudCkuYmluZCgnY2xpY2snLCBmdW5jdGlvbihlKXtcbiAgICAgICAgICBpZiAoISAkKGUudGFyZ2V0KS5wYXJlbnRzKCkuaGFzQ2xhc3MoJ2Ryb3B5JykpeyBzZWxmLiRkcm9weXMucmVtb3ZlQ2xhc3Moc2VsZi5vcGVuQ2xhc3MpOyB9XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG4gIFxuICAkKGZ1bmN0aW9uKCl7XG4gICAgZHJvcHkuaW5pdCgpO1xuICB9KTtcblxuICAgIGZ1bmN0aW9uIGFjdHMoKSB7XG4gICAgICB2YXIgdGU7XG4gICAgICB2YXIgbWluID0gJCgnLnBvc3QtbGlzdC1pdGVtLWNvbnRlbnQgaDInKS5oZWlnaHQoKTtcbiAgICAgICQoJy5wb3N0LWxpc3QtaXRlbSAucG9zdC1saXN0LWl0ZW0tY29udGVudCBoMicpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICgkKHRoaXMpLmhlaWdodCgpIDwgbWluKVxuICAgICAgICAgIG1pbiA9ICQodGhpcykuaGVpZ2h0KCk7XG4gICAgICB9KTtcbiAgXG4gICAgICAkKCcucG9zdC1saXN0LWl0ZW0tY29udGVudCBoMicpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICgkKHRoaXMpLmhlaWdodCgpID09IG1pbikge1xuICAgICAgICAgIHRlID0gJCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKS5jaGlsZHJlbignLmV4Y2VycHQnKTtcbiAgICAgICAgICAkKHRlKS50ZXh0KGZ1bmN0aW9uKGluZGV4LCBjdXJyZW50VGV4dCkge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRUZXh0LnN1YnN0cihjdXJyZW50VGV4dC5sZW5ndGggLSAzKSAhPSAnJmhlbGxpcDsnKVxuICAgICAgICAgICAgICByZXR1cm4gY3VycmVudFRleHQuc3Vic3RyKDAsIDE1MCkgKyAnJmhlbGxpcDsnO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2UgaWYgKCgkKHRoaXMpLmhlaWdodCgpIDwgKG1pbiAtIDEpICogMykgJiYgKCQodGhpcykuaGVpZ2h0KCkgPiBtaW4pKSB7XG4gICAgICAgICAgdGUgPSAkKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLmNoaWxkcmVuKCcuZXhjZXJwdCcpO1xuICAgICAgICAgICQodGUpLnRleHQoZnVuY3Rpb24oaW5kZXgsIGN1cnJlbnRUZXh0KSB7XG4gICAgICAgICAgICByZXR1cm4gY3VycmVudFRleHQuc3Vic3RyKDAsIDgwKSArICcmaGVsbGlwOyc7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGUgPSAkKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLmNoaWxkcmVuKCcuZXhjZXJwdCcpO1xuICAgICAgICAgICQodGhpcykudGV4dChmdW5jdGlvbihpbmRleCwgY3VycmVudFRleHQpIHtcbiAgICAgICAgICAgIGlmICgoY3VycmVudFRleHQuc3Vic3RyKGN1cnJlbnRUZXh0Lmxlbmd0aCAtIDMpICE9ICcmaGVsbGlwOycpICYmIChjdXJyZW50VGV4dC5sZW5ndGggPiAxMjApKVxuICAgICAgICAgICAgICByZXR1cm4gY3VycmVudFRleHQuc3Vic3RyKDAsIDEyMCkgKyAnJmhlbGxpcDsnO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHRlLmNzcyhcImRpc3BsYXlcIiwgXCJub25lXCIpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgYWN0cygpO1xuICAgICQod2luZG93KS5yZXNpemUoYWN0cyk7XG4gIFxuICBcbiAgJChcIi5jYXJkIC5leGNlcnB0XCIpLnRleHQoZnVuY3Rpb24oaW5kZXgsIGN1cnJlbnRUZXh0KSB7XG4gICAgcmV0dXJuIGN1cnJlbnRUZXh0LnN1YnN0cigwLCAxNDApICsgJyZoZWxsaXA7JztcbiAgfSk7XG5cbiAgLy8gUGFrdWplIG1uaWVqc3plIG9icmF6a2kgYmV6IHBvZHBpc3UgdyA8ZmlndXJlPiAvL1xuICAvLyBKZcWbbGkgb2JyYXplayBtYSB0eXR1xYIsIHR5bSBzacSZIHpham11amUgcGhwIGZ1bmtjamEgdyBwcm9qZWN0LWZ1bmN0aW9ucy5waHBcbiAgJCgnLnByb2plY3QtY29udGVudCBwJykuZWFjaChmdW5jdGlvbihpbmRleCkge1xuICAgIHZhciBzb21lX2ltZyA9ICQodGhpcykuZmluZCgnaW1nJyk7XG4gICAgdmFyIHdpZHRoID0gc29tZV9pbWcud2lkdGgoKTtcbiAgICBpZiAod2lkdGggPCA5ODApIHtcbiAgICAgIHNvbWVfaW1nLndyYXAoXCI8ZmlndXJlPjwvZmlndXJlPlwiKTtcbiAgICB9XG4gIH0pO1xuXG4gIC8vU2tyYWNhIGltaW9uYSwgYnkgbmllIHd5Y2hvZHppxYJ5IHphIGJsb2tpXG4gICQoJy5jby1hdXRob3IgaDMgYScpLmVhY2goZnVuY3Rpb24oaW5kZXgpIHtcbiAgICB2YXIgbGVuZ3RoID0gJCh0aGlzKS5odG1sKCkubGVuZ3RoO1xuICAgIGlmIChsZW5ndGggPiAxMykge1xuICAgICAgdmFyIG5hbWUgPSAkKHRoaXMpLnRleHQoKTtcbiAgICAgIC8vIGNvbnNvbGUubG9nKG5hbWUpO1xuICAgICAgdmFyIHRyaW1tZWRfbmFtZSA9IG5hbWUuY2hhckF0KDApICsgXCIuIFwiICsgbmFtZS5zdWJzdHIobmFtZS5pbmRleE9mKCcgJykgKyAxKTtcbiAgICAgIC8vIGNvbnNvbGUubG9nKHRyaW1tZWRfbmFtZSk7XG4gICAgICAkKHRoaXMpLnRleHQodHJpbW1lZF9uYW1lKTtcbiAgICB9XG4gIH0pO1xuXG4gIC8vIE5vdHlmaWthY2plLCBwb3dpYWRvbWllbmlhIC8vXG4gICQoXCIubm90ZS1jbG9zZVwiKS5jbGljayhmdW5jdGlvbigpIHtcbiAgICAkKHRoaXMpLnBhcmVudCgpXG4gICAgICAuYW5pbWF0ZSh7XG4gICAgICAgIG9wYWNpdHk6IDBcbiAgICAgIH0sIDI1MCwgZnVuY3Rpb24oKSB7XG4gICAgICAgICQodGhpcylcbiAgICAgICAgICAuYW5pbWF0ZSh7XG4gICAgICAgICAgICBtYXJnaW5Cb3R0b206IDBcbiAgICAgICAgICB9LCAyNTApXG4gICAgICAgICAgLmNoaWxkcmVuKClcbiAgICAgICAgICAuYW5pbWF0ZSh7XG4gICAgICAgICAgICBwYWRkaW5nOiAwXG4gICAgICAgICAgfSwgMjUwKVxuICAgICAgICAgIC53cmFwSW5uZXIoXCI8ZGl2IC8+XCIpXG4gICAgICAgICAgLmNoaWxkcmVuKClcbiAgICAgICAgICAuc2xpZGVVcCgyNTAsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KFwiLm5vdGVcIikucmVtb3ZlKCk7XG4gICAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgfSk7XG5cbiAgLy8gQW5pbWFjamUgZGxhIGJhbmVyYSByZWtydXRhY2ppIC8vXG4gICQoJ2xhYmVsLmJ1dHRvbicpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICQoJy5mYicpLmFkZENsYXNzKCdhbmltYXRlZCBmYWRlSW5VcCcpO1xuICAgICQoJy5kYXRlIC5pY29uLWNvbnRhaW5lcicpLmFkZENsYXNzKCdhbmltYXRlZCBzbGlkZUluTGVmdCcpO1xuICAgICQoJy5kYXRlIHNwYW4nKS5hZGRDbGFzcygnYW5pbWF0ZWQgc2xpZGVJbkxlZnQnKTtcbiAgICAkKCcubG9jYXRpb24gLmljb24tY29udGFpbmVyJykuYWRkQ2xhc3MoJ2FuaW1hdGVkIHNsaWRlSW5SaWdodCcpO1xuICAgICQoJy5sb2NhdGlvbiBzcGFuJykuYWRkQ2xhc3MoJ2FuaW1hdGVkIHNsaWRlSW5SaWdodCcpO1xuICBcbiAgfSk7XG4gICQoJyNjbG9zZV9iYW5uZXInKS5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAkKCcuZmInKS5yZW1vdmVDbGFzcygnYW5pbWF0ZWQgZmFkZUluVXAnKTtcbiAgICAkKCcuZGF0ZSAuaWNvbi1jb250YWluZXInKS5yZW1vdmVDbGFzcygnYW5pbWF0ZWQgc2xpZGVJbkxlZnQnKTtcbiAgICAkKCcuZGF0ZSBzcGFuJykucmVtb3ZlQ2xhc3MoJ2FuaW1hdGVkIHNsaWRlSW5MZWZ0Jyk7XG4gICAgJCgnLmxvY2F0aW9uIC5pY29uLWNvbnRhaW5lcicpLnJlbW92ZUNsYXNzKCdhbmltYXRlZCBzbGlkZUluUmlnaHQnKTtcbiAgICAkKCcubG9jYXRpb24gc3BhbicpLnJlbW92ZUNsYXNzKCdhbmltYXRlZCBzbGlkZUluUmlnaHQnKTtcbiAgfSk7XG4gIFxuICAvLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzI0MDcwNjI3L2NyZWF0ZS1kcm9wZG93bi1iYW5uZXItd2hlbi11c2VyLWZpcnN0LXZpc2l0cy13ZWJzaXRlXG4gIC8vIFBvendhbGFqxIUgb3R3aWVyYcSHIGJhbmVyIHR5bGtvIHByenkgcGllcndzemVqIHdpenljaWVcbiAgXG4gIC8vIGNvb2tpZS1qc1xuXG4gIFxuICAgICQoZnVuY3Rpb24oKSB7XG4gICAgICAvLyBUb3VjaCByaXBwbGUgZWZmZWN0IG9uIGJ1dHRvbnNcbiAgICAgICQoJy5idXR0b246bm90KC5idXR0b24uZGlzYWJsZWQpJykub24oJ2NsaWNrJyxcbiAgXG4gICAgICAgIGZ1bmN0aW9uKGUpIHtcbiAgXG4gICAgICAgICAgLyohXG4gICAgICAgICAgU1ZHIHZlcnNpb24gZm9yIHJpcHBsZSBlZmZlY3QgdmlhIEpvbmF0aGFuIEN1dHJlbGwgKGdlbnRseSBtb2RpZmllZClcbiAgICAgICAgICBodHRwOi8vd2ViZGVzaWduLnR1dHNwbHVzLmNvbS90dXRvcmlhbHMvcmVjcmVhdGluZy10aGUtdG91Y2gtcmlwcGxlLWVmZmVjdC1hcy1zZWVuLW9uLWdvb2dsZS1kZXNpZ24tLWNtcy0yMTY1NVxuICAgICAgICAgICovXG4gIFxuICAgICAgICAgIHZhciB4ID0gZS5wYWdlWDtcbiAgICAgICAgICB2YXIgeSA9IGUucGFnZVk7XG4gICAgICAgICAgdmFyIGNsaWNrWSA9IHkgLSAkKHRoaXMpLm9mZnNldCgpLnRvcDtcbiAgICAgICAgICB2YXIgY2xpY2tYID0geCAtICQodGhpcykub2Zmc2V0KCkubGVmdDtcbiAgICAgICAgICB2YXIgYm94ID0gdGhpcztcbiAgXG4gICAgICAgICAgdmFyIHNldFggPSBwYXJzZUludChjbGlja1gpO1xuICAgICAgICAgIHZhciBzZXRZID0gcGFyc2VJbnQoY2xpY2tZKTtcbiAgICAgICAgICB2YXIgcmlwcGxlID0gJzxzdmcgY2xhc3M9XCJpbmtcIj48Y2lyY2xlIGN4PVwiJyArIHNldFggKyAnXCIgY3k9XCInICsgc2V0WSArICdcIiByPVwiJyArIDAgKyAnXCI+PC9jaXJjbGU+PC9zdmc+JztcbiAgXG4gICAgICAgICAgJCh0aGlzKS5maW5kKCcuaW5rJykucmVtb3ZlKCk7XG4gICAgICAgICAgJCh0aGlzKS5hcHBlbmQocmlwcGxlKTtcbiAgXG4gICAgICAgICAgdmFyIGMgPSAkKGJveCkuZmluZCgnY2lyY2xlJyk7XG4gICAgICAgICAgYy5hbmltYXRlKHtcbiAgICAgICAgICAgICdyJzogJChib3gpLm91dGVyV2lkdGgoKVxuICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgIGR1cmF0aW9uOiAzMzMsXG4gICAgICAgICAgICBzdGVwOiBmdW5jdGlvbih2YWwpIHtcbiAgICAgICAgICAgICAgYy5hdHRyKCdyJywgdmFsKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIGMuZmFkZU91dCgnZmFzdCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICBcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgXG4gICAgICAgIH0pO1xuICBcbiAgICB9KTtcblxuICAvLyBQb2JpZXJhbmllIG5pY2vDs3cgeiB1cmwgaSB3ecWbd2lldGxhbmllIGljaCBrb8WCbyBpa29uIHNwb8WCZWN6bm/Fm2Npb3d5Y2hcbiAgLy8gb3JheiB3eWtvcnp5c3RhbmllIHVzZXJuYW1lJ3UgZ2l0aHViYSBkbyB3ecWbd2lldGxlbmlhIG9zdGF0bmllIGFrdHl3bm/Fm2NpXG4gICQoJy51c2VyaW5mbyBhJykuZWFjaChmdW5jdGlvbihpbmRleCkge1xuICAgIHZhciBwcm9maWxlID0gJCh0aGlzKS5hdHRyKCdocmVmJyk7XG4gICAgdmFyIGdpdGh1Yl9wcm9maWxlID0gcHJvZmlsZS5zdWJzdHIoMTkpO1xuICAgIGlmIChwcm9maWxlLmluZGV4T2YoJ2dpdGh1YicpID4gLTEpIHtcbiAgICAgICQoJ2FbZGF0YS1naXRodWJdJykuYXBwZW5kKGdpdGh1Yl9wcm9maWxlKTtcbiAgICAgIEdpdGh1Yi5vbmx5dXNlckFjdGl2aXR5KHtcbiAgICAgICAgdXNlcm5hbWU6IGdpdGh1Yl9wcm9maWxlLFxuICAgICAgICBzZWxlY3RvcjogXCIuZ2l0aHViXCIsXG4gICAgICAgIGxpbWl0OiAxMFxuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChwcm9maWxlLmluZGV4T2YoJ3R3aXR0ZXInKSA+IC0xKSB7XG4gICAgICAkKCdhW2RhdGEtdHdpdHRlcl0nKS5hcHBlbmQocHJvZmlsZS5zdWJzdHIoMjApKTtcbiAgICB9XG4gICAgaWYgKHByb2ZpbGUuaW5kZXhPZignZmFjZWJvb2snKSA+IC0xKSB7XG4gICAgICAkKCdhW2RhdGEtZmFjZWJvb2tdJykuYXBwZW5kKHByb2ZpbGUuc3Vic3RyKDI1KSk7XG4gICAgfVxuICB9KTtcbiAgXG4gIC8vIEdpdGh1Yi5vbmx5dXNlckFjdGl2aXR5KHtcbiAgLy8gICB1c2VybmFtZTogXCJzeW5lcmdpYVwiLFxuICAvLyAgIHNlbGVjdG9yOiBcIi5naXRodWJfc1wiLFxuICAvLyAgIGxpbWl0OiA1XG4gIC8vIH0pO1xuXG4gIGZ1bmN0aW9uIHRhYnMoYkxhenkpIHtcbiAgICAvLyBzZXQgYWN0aXZlIHJhZGlvIHRvIGFkZHJlc3MgYmFyXG4gICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy50YWJzIC50YWJzLW5hdiBsYWJlbCcsIGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHRhYl9uciA9ICQodGhpcykuYXR0cignZm9yJyk7XG4gICAgICB2YXIgaGFzaCA9ICcjJyArIHRhYl9ucjtcbiAgICAgIHdpbmRvdy5oaXN0b3J5LnJlcGxhY2VTdGF0ZSgnJywgJycsIGhhc2gpO1xuICAgICAgaWYodGFiX25yID09PSAndGFiLTEnKXtcbiAgICAgICAgYkxhenkubG9hZCgkKCcudGFiOm50aC1vZi10eXBlKDEpIC5ibGF6eScpLCB0cnVlKTtcbiAgICAgIH0gZWxzZSBpZiAodGFiX25yID09PSAndGFiLTInKSB7XG4gICAgICAgIGJMYXp5LmxvYWQoJCgnLnRhYjpudGgtb2YtdHlwZSgyKSAuYmxhenknKSwgdHJ1ZSk7XG4gICAgICB9ZWxzZSBpZiAodGFiX25yID09PSAndGFiLTMnKSB7XG4gICAgICAgIGJMYXp5LmxvYWQoJCgnLnRhYjpudGgtb2YtdHlwZSgzKSAuYmxhenknKSwgdHJ1ZSk7XG4gICAgICB9XG4gIFxuICAgIH0pO1xuICAgIC8vIHNlbGVjdCBhY3RpdmUgcmFkaW8gYmFzZWQgb24gaGFzaFxuICAgICQoZG9jdW1lbnQubG9jYXRpb24uaGFzaCkucHJvcCgnY2hlY2tlZCcsIHRydWUpO1xuICB9XG5cbiAgLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAqIEJvb3RzdHJhcDogdHJhbnNpdGlvbi5qcyB2My4zLjZcbiAgICogaHR0cDovL2dldGJvb3RzdHJhcC5jb20vamF2YXNjcmlwdC8jdHJhbnNpdGlvbnNcbiAgICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAqIENvcHlyaWdodCAyMDExLTIwMTUgVHdpdHRlciwgSW5jLlxuICAgKiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ibG9iL21hc3Rlci9MSUNFTlNFKVxuICAgKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cbiAgXG4gIFxuICArZnVuY3Rpb24gKCQpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gIFxuICAgIC8vIENTUyBUUkFOU0lUSU9OIFNVUFBPUlQgKFNob3V0b3V0OiBodHRwOi8vd3d3Lm1vZGVybml6ci5jb20vKVxuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICBcbiAgICBmdW5jdGlvbiB0cmFuc2l0aW9uRW5kKCkge1xuICAgICAgdmFyIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYm9vdHN0cmFwJylcbiAgXG4gICAgICB2YXIgdHJhbnNFbmRFdmVudE5hbWVzID0ge1xuICAgICAgICBXZWJraXRUcmFuc2l0aW9uIDogJ3dlYmtpdFRyYW5zaXRpb25FbmQnLFxuICAgICAgICBNb3pUcmFuc2l0aW9uICAgIDogJ3RyYW5zaXRpb25lbmQnLFxuICAgICAgICBPVHJhbnNpdGlvbiAgICAgIDogJ29UcmFuc2l0aW9uRW5kIG90cmFuc2l0aW9uZW5kJyxcbiAgICAgICAgdHJhbnNpdGlvbiAgICAgICA6ICd0cmFuc2l0aW9uZW5kJ1xuICAgICAgfVxuICBcbiAgICAgIGZvciAodmFyIG5hbWUgaW4gdHJhbnNFbmRFdmVudE5hbWVzKSB7XG4gICAgICAgIGlmIChlbC5zdHlsZVtuYW1lXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgcmV0dXJuIHsgZW5kOiB0cmFuc0VuZEV2ZW50TmFtZXNbbmFtZV0gfVxuICAgICAgICB9XG4gICAgICB9XG4gIFxuICAgICAgcmV0dXJuIGZhbHNlIC8vIGV4cGxpY2l0IGZvciBpZTggKCAgLl8uKVxuICAgIH1cbiAgXG4gICAgLy8gaHR0cDovL2Jsb2cuYWxleG1hY2Nhdy5jb20vY3NzLXRyYW5zaXRpb25zXG4gICAgJC5mbi5lbXVsYXRlVHJhbnNpdGlvbkVuZCA9IGZ1bmN0aW9uIChkdXJhdGlvbikge1xuICAgICAgdmFyIGNhbGxlZCA9IGZhbHNlXG4gICAgICB2YXIgJGVsID0gdGhpc1xuICAgICAgJCh0aGlzKS5vbmUoJ2JzVHJhbnNpdGlvbkVuZCcsIGZ1bmN0aW9uICgpIHsgY2FsbGVkID0gdHJ1ZSB9KVxuICAgICAgdmFyIGNhbGxiYWNrID0gZnVuY3Rpb24gKCkgeyBpZiAoIWNhbGxlZCkgJCgkZWwpLnRyaWdnZXIoJC5zdXBwb3J0LnRyYW5zaXRpb24uZW5kKSB9XG4gICAgICBzZXRUaW1lb3V0KGNhbGxiYWNrLCBkdXJhdGlvbilcbiAgICAgIHJldHVybiB0aGlzXG4gICAgfVxuICBcbiAgICAkKGZ1bmN0aW9uICgpIHtcbiAgICAgICQuc3VwcG9ydC50cmFuc2l0aW9uID0gdHJhbnNpdGlvbkVuZCgpXG4gIFxuICAgICAgaWYgKCEkLnN1cHBvcnQudHJhbnNpdGlvbikgcmV0dXJuXG4gIFxuICAgICAgJC5ldmVudC5zcGVjaWFsLmJzVHJhbnNpdGlvbkVuZCA9IHtcbiAgICAgICAgYmluZFR5cGU6ICQuc3VwcG9ydC50cmFuc2l0aW9uLmVuZCxcbiAgICAgICAgZGVsZWdhdGVUeXBlOiAkLnN1cHBvcnQudHJhbnNpdGlvbi5lbmQsXG4gICAgICAgIGhhbmRsZTogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICBpZiAoJChlLnRhcmdldCkuaXModGhpcykpIHJldHVybiBlLmhhbmRsZU9iai5oYW5kbGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cylcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG4gIFxuICB9KGpRdWVyeSk7XG5cbiAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKXtcbiAgICAgICQoXCIjbmF2LW1vYmlsZVwiKS5odG1sKCQoXCIjbmF2LW1haW5cIikuaHRtbCgpKTtcbiAgICAgICQoXCIjbmF2LXRyaWdnZXIgLm5hdmljb24tYnV0dG9uXCIpLmNsaWNrKGZ1bmN0aW9uKCl7XG4gICAgICAgIGNvbnNvbGUuaW5mbygnQnVyZ2VyIGNsaWNrZWQnKTtcbiAgICAgICAgICBpZiAoJChcIm5hdiNuYXYtbW9iaWxlIHVsXCIpLmhhc0NsYXNzKFwiZXhwYW5kZWRcIikpIHtcbiAgICAgICAgICAgICAgJChcIm5hdiNuYXYtbW9iaWxlIHVsLmV4cGFuZGVkXCIpLnJlbW92ZUNsYXNzKFwiZXhwYW5kZWRcIikuc2xpZGVVcCgyNTApO1xuICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKFwib3BlblwiKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAkKFwibmF2I25hdi1tb2JpbGUgdWxcIikuYWRkQ2xhc3MoXCJleHBhbmRlZFwiKS5zbGlkZURvd24oMjUwKTtcbiAgICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcyhcIm9wZW5cIik7XG4gICAgICAgICAgfVxuICAgICAgfSk7XG4gIH0pO1xuXG4gICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuICAgIFNsaWRlciA9ICQoJyNzbGlkZXInKS5Td2lwZSh7XG4gICAgICBhdXRvOiAwLFxuICAgICAgY29udGludW91czogdHJ1ZSxcbiAgICB9KS5kYXRhKCdTd2lwZScpO1xuICAgIGlmIChTbGlkZXIpIHtcbiAgICAgICQoJy5uZXh0Jykub24oJ2NsaWNrJywgU2xpZGVyLm5leHQpO1xuICAgICAgJCgnLnByZXYnKS5vbignY2xpY2snLCBTbGlkZXIucHJldik7XG4gICAgfVxuICB9KTtcblxuICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcbiAgXG4gICAgICAkKCcuYmxvZy1saXN0LWFyY2hpdmUgbGkgdWwnKS5oaWRlKCk7XG4gICAgICAkKCcuYXJjaGl2ZS1saXN0ID4gbGkgPiBoMicpLmNsaWNrKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5hZGRDbGFzcygnc2VsZWN0ZWQnKTtcbiAgICAgICAgICAkKHRoaXMpLnBhcmVudCgpLmNoaWxkcmVuKCd1bCcpLnNsaWRlRG93bigyNTApO1xuICAgICAgICAgICQodGhpcykucGFyZW50KCkuc2libGluZ3MoKS5jaGlsZHJlbigndWwnKS5zbGlkZVVwKDI1MCk7XG4gICAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpO1xuICAgICAgfSk7XG4gIH0pO1xuXG4gIC8vIFByZXplcyB6YXdzemUgbmEgcGllcndzenltIG1pZWpzY3UgLy9cbiAgJCgnI21hbmFnZW1lbnRfYm9hcmQgbGkjYWRtaW4nKS5pbnNlcnRCZWZvcmUoJyNtYW5hZ2VtZW50X2JvYXJkIGxpOmVxKDApJyk7XG59KTsiXSwiZmlsZSI6Im1haW4ubWluLmpzIiwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
